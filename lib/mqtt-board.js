!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/web.dom.iterable"),require("core-js/modules/es6.array.iterator"),require("core-js/modules/es6.object.keys"),require("core-js/modules/es6.function.name"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/es6.object.to-string"),require("core-js/modules/es7.object.get-own-property-descriptors"),require("core-js/modules/es6.symbol"),require("core-js/library/fn/array/is-array"),require("core-js/library/fn/array/from"),require("core-js/library/fn/is-iterable"),require("core-js/modules/es7.object.values"),require("core-js/modules/es6.array.fill"),require("@babel/runtime-corejs2/regenerator"),require("regenerator-runtime/runtime"),require("core-js/library/fn/promise"),require("core-js/library/fn/object/define-property"),require("core-js/modules/es6.array.find-index"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.regexp.replace"),require("core-js/modules/es7.array.includes"),require("core-js/modules/es6.string.includes"),require("core-js/modules/es6.promise"),require("lodash/merge"),require("lodash/cloneDeep"),require("lodash/isNil"),require("lodash/get"),require("lodash/debounce"),require("quasar"),require("vue-runtime-helpers"),require("core-js/modules/es6.object.assign"),require("core-js/modules/es6.array.sort"),require("core-js/modules/es6.number.constructor"),require("vue-virtual-scroll-list"),require("core-js/library/fn/symbol/iterator"),require("core-js/library/fn/symbol")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/web.dom.iterable","core-js/modules/es6.array.iterator","core-js/modules/es6.object.keys","core-js/modules/es6.function.name","core-js/modules/es6.regexp.to-string","core-js/modules/es6.object.to-string","core-js/modules/es7.object.get-own-property-descriptors","core-js/modules/es6.symbol","core-js/library/fn/array/is-array","core-js/library/fn/array/from","core-js/library/fn/is-iterable","core-js/modules/es7.object.values","core-js/modules/es6.array.fill","@babel/runtime-corejs2/regenerator","regenerator-runtime/runtime","core-js/library/fn/promise","core-js/library/fn/object/define-property","core-js/modules/es6.array.find-index","core-js/modules/es6.regexp.split","core-js/modules/es6.regexp.replace","core-js/modules/es7.array.includes","core-js/modules/es6.string.includes","core-js/modules/es6.promise","lodash/merge","lodash/cloneDeep","lodash/isNil","lodash/get","lodash/debounce","quasar","vue-runtime-helpers","core-js/modules/es6.object.assign","core-js/modules/es6.array.sort","core-js/modules/es6.number.constructor","vue-virtual-scroll-list","core-js/library/fn/symbol/iterator","core-js/library/fn/symbol"],t):t((e=e||self)["mqtt-board"]={},null,null,null,null,null,null,null,null,e.isArray$1,e.from,e.isIterable$1,null,null,e._regeneratorRuntime,null,e.promise$1,e.defineProperty$2,null,null,null,null,null,null,e.merge,e.cloneDeep,e.isNil,e.get,e.debounce,e.quasar,e.vueRuntimeHelpers,null,null,null,e.VirtualList,e.iterator$1,e.symbol$1)}(this,function(e,t,s,i,r,o,n,a,l,c,p,u,d,m,b,g,h,f,v,y,q,x,S,_,C,w,k,P,$,M,U,I,j,O,T,E,A){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c,p=p&&p.hasOwnProperty("default")?p.default:p,u=u&&u.hasOwnProperty("default")?u.default:u,b=b&&b.hasOwnProperty("default")?b.default:b,h=h&&h.hasOwnProperty("default")?h.default:h,f=f&&f.hasOwnProperty("default")?f.default:f,C=C&&C.hasOwnProperty("default")?C.default:C,w=w&&w.hasOwnProperty("default")?w.default:w,k=k&&k.hasOwnProperty("default")?k.default:k,P=P&&P.hasOwnProperty("default")?P.default:P,$=$&&$.hasOwnProperty("default")?$.default:$,T=T&&T.hasOwnProperty("default")?T.default:T,E=E&&E.hasOwnProperty("default")?E.default:E,A=A&&A.hasOwnProperty("default")?A.default:A;var N=c;var H=function(e){if(N(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}},z=p,L=u;var R=function(e){if(L(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return z(e)};var F=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var D=function(e){return H(e)||R(e)||F()},B=h;function V(e,t,s,i,r,o,n){try{var a=e[o](n),l=a.value}catch(e){return void s(e)}a.done?t(l):B.resolve(l).then(i,r)}var W=function(a){return function(){var e=this,n=arguments;return new B(function(t,s){var i=a.apply(e,n);function r(e){V(i,t,s,r,o,"next",e)}function o(e){V(i,t,s,r,o,"throw",e)}r(void 0)})}},X=f;var Q=function(e,t,s){return t in e?X(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e},J=require("mqtt"),Y={connect:function(e,t){return new K(J.connect(e,t))},AsyncClient:K};function K(e){this._client=e}K.prototype={set handleMessage(e){this._client.handleMessage=e},get handleMessage(){return this._client.handleMessage}},["publish","subscribe","unsubscribe","end"].forEach(function(r){K.prototype[r]=function(){for(var s=this._client,i=[],e=arguments.length,t=0;t<e;t++)i.push(arguments[t]);return new Promise(function(e,t){i.push(function(s,i){return function(e,t){e?i(e):s(t)}}(e,t)),s[r].apply(s,i)})}}),["emit","addListener","on","once","removeListener","removeAllListeners","setMaxListeners","getMaxListeners","listeners","listenerCount"].forEach(function(t){K.prototype[t]=function(){var e=this._client;return e[t].apply(e,arguments)}});function G(e){return e}var Z={};function ee(e){if(e){var t=Z[e];t&&t.timer&&(cancelAnimationFrame(t.timer),t.cancel&&t.cancel(t.last),delete Z[e])}}var te={start:function(e){var t=e.name,s=e.duration,i=void 0===s?300:s,r=e.to,o=e.from,n=e.apply,a=e.done,l=e.cancel,c=e.easing,p=t,u=new Date;p?ee(p):p=M.uid();var d=c||G,m=Z[p]={cancel:l,timer:requestAnimationFrame(function e(){var t=(new Date-u)/i;1<t&&(t=1);var s=o+(r-o)*d(t);if(n(s,t),1===t)return delete Z[p],void(a&&a(s));m.last={pos:s,progress:t},m.timer=requestAnimationFrame(e)})};return p},stop:ee},se={name:"FlespiTopicConfigurator",props:{color:{type:String,default:"grey-9"}},data:function(){return{opened:!1,topicBase:"flespi/",type:"+",types:["message","log","state"],api:"",posibleApis:["platform","gw","storage","mqtt"],entity:"+",posibleEntities:{gw:["channels","devices","streams","modems"],storage:["containers"],mqtt:["sessions"],platform:["customer"]},id:"",postfixModel:""}},computed:{apis:function(){var e=this.posibleApis;return"message"===this.type&&(e=["gw"]),"state"===this.type&&(e=["platform","gw","storage"]),this.setApi(e[0]),e},entities:function(){return"message"===this.type?["channels","devices","modems"]:this.api?this.posibleEntities[this.api]:[]},postfix:{get:function(){return this.postfixModel?this.postfixModel:"state"===this.type?"":"#"},set:function(e){e?this.postfixModel=e:"state"===this.type?this.postfixModel="":this.postfixModel="#"}},topic:function(){var e=this.topicBase;return e+=this.type||"+",e+="/",e+=this.api||"+",e+="/",e+=this.entity||"+",e+="/",e+=this.id||"+",e+=this.postfix&&this.isNeedPostfix?"/".concat(this.postfix):"",e},isNeedPostfix:function(){return!("message"===this.type&&"gw"===this.api&&"devices"===this.entity)}},methods:{saveSettingsHandler:function(){this.$emit("topic",this.topic),this.clear()},clear:function(){this.type="+",this.api="",this.entity="+",this.id="",this.postfix=""},open:function(){this.opened=!0},setApi:function(e){this.api=e}},watch:{type:function(){this.api="",this.entity="+",this.id="",this.postfix=""},api:function(){this.entity="+",this.id="",this.postfix=""},entity:function(){this.id="",this.postfix=""}}},ie=U.normalizeComponent({render:function(){var e,t,s=this,i=s.$createElement,r=s._self._c||i;return r("q-dialog",{staticClass:"mqtt-board-modal mqtt-board-topic-modal",attrs:{maximized:s.$q.platform.is.mobile},model:{value:s.opened,callback:function(e){s.opened=e},expression:"opened"}},[r("q-card",{style:{minWidth:s.$q.platform.is.mobile?"100%":"30vw"}},[r("q-card-section",{staticClass:"q-pa-none"},[r("q-toolbar",{class:(e={},e["bg-"+s.color]=!0,e["text-white"]=!!s.color,e)},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"keyboard_arrow_left"},on:{click:s.clear}}),r("q-toolbar-title",[s._v("\n          Topic config\n        ")])],1)],1),r("q-separator"),r("q-card-section",{staticClass:"scroll",style:{height:s.$q.platform.is.mobile?"calc(100% - 94px)":"55vh"}},[r("div",[r("div",{staticClass:"q-mb-md q-py-sm",staticStyle:{overflow:"auto"}},[s._v(s._s(s.topic))]),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("Type:")]),r("q-btn-toggle",{attrs:{"toggle-color":"grey-9",dense:s.$q.platform.is.mobile,size:"sm",options:[{label:"any",value:"+"}].concat(s.types.map(function(e){return{label:e,value:e}}))},model:{value:s.type,callback:function(e){s.type=e},expression:"type"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("API:")]),r("q-btn-toggle",{attrs:{"toggle-color":"grey-9",dense:s.$q.platform.is.mobile,size:"sm",options:s.apis.map(function(e){return{label:e,value:e}})},model:{value:s.api,callback:function(e){s.api=e},expression:"api"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"q-mb-xs"},[s._v("Entity:")]),s.entities.length?r("q-btn-toggle",{attrs:{dense:s.$q.platform.is.mobile,"toggle-color":"grey-9",size:"sm",options:[{label:"any",value:"+"}].concat(s.entities.map(function(e){return{label:e,value:e}}))},model:{value:s.entity,callback:function(e){s.entity=e},expression:"entity"}}):r("span",[s._v("Choose API")])],1),r("q-input",{staticClass:"q-mb-md",attrs:{color:"grey-9",label:"Identifier",outlined:""},model:{value:s.id,callback:function(e){s.id=e},expression:"id"}}),s.isNeedPostfix?r("q-input",{attrs:{color:"grey-9",outlined:"",label:"Postfix"},model:{value:s.postfix,callback:function(e){s.postfix=e},expression:"postfix"}}):s._e()],1)]),r("q-separator"),r("q-card-actions",{class:(t={},t["bg-"+s.color]=!0,t["text-white"]=!!s.color,t),attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:s.clear}},[s._v("Close")]),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:s.saveSettingsHandler}},[s._v("Save")])],1)],1)],1)},staticRenderFns:[]},void 0,se,void 0,!1,void 0,!1,void 0,void 0,void 0),re={name:"TreeModeView",props:{data:Object,topic:String,nesting:{type:Number,default:0}},data:function(){for(var e={},t=Object.keys(this.data),s=0,i=t.length;s<i;s++)e[t[s]]=!1;return{showObj:e,limit:1e4}},computed:{keys:function(){return Object.keys(this.data).sort(function(e,t){if((e=e.toLowerCase())!==(t=t.toLowerCase())){var s=Number(e),i=Number(t);return s+""===e&&i+""===t?s-i:t<e?1:-1}})},limitedKeys:function(){return this.keys.slice(0,this.limit)}},methods:{toggle:function(e){this.$set(this.showObj,e,!this.showObj[e]),this.$emit("change",this.data[e].topic)}}},oe=U.normalizeComponent({render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticStyle:{"user-select":"none"},style:s.$q.platform.is.desktop?{display:"inline-block",minWidth:"100%"}:[]},[s._l(s.limitedKeys,function(e,t){return[i("div",{key:""+e,staticClass:"cursor-pointer",class:{"bg-grey-2":s.topic&&s.topic===s.data[e].topic},style:{paddingLeft:10*s.nesting+(s.data[e].children?0:14)+"px",display:s.$q.platform.is.desktop?"inline-block":"",minWidth:s.$q.platform.is.desktop?"100%":"",overflow:s.$q.platform.is.desktop?"":"hidden",textOverflow:s.$q.platform.is.desktop?"":"ellipsis"},on:{click:function(){return s.toggle(e,t)}}},[s.data[e].children?[s.showObj[e]?i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-down"}}):i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-right"}})]:s._e(),i("span",{class:{"text-grey-6":!e,"text-italic":!e}},[s._v(s._s(e||"*Empty*"))])],2),s.showObj[e]&&s.data[e].children?i("tree-mode-view",{key:"nest-"+e,attrs:{nesting:s.nesting+1,topic:s.topic,data:s.data[e].children},on:{change:function(e){s.$emit("change",e)}}}):s._e()]}),s.keys.length>s.limitedKeys.length?i("div",{staticClass:"more-button cursor-pointer text-bold",staticStyle:{display:"inline-block"},style:{marginLeft:10*s.nesting+14+"px"},on:{click:function(){s.limit+=1e3}}},[s._v("\n    more "+s._s(1e3<=s.keys.length-s.limit?1e3:s.keys.length-s.limit)+"\n  ")]):s._e()],2)},staticRenderFns:[]},function(e){e&&e("data-v-556de7dc_0",{source:".more-button:hover{background-color:$grey-3}",map:void 0,media:void 0})},re,void 0,!1,void 0,!1,U.createInjector,void 0,void 0);var ne,ae=E,le=A,ce=(function(t){function s(e){return(s="function"==typeof le&&"symbol"==typeof ae?function(e){return typeof e}:function(e){return e&&"function"==typeof le&&e.constructor===le&&e!==le.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof le&&"symbol"===s(ae)?t.exports=i=function(e){return s(e)}:t.exports=i=function(e){return e&&"function"==typeof le&&e.constructor===le&&e!==le.prototype?"symbol":s(e)},i(e)}t.exports=i}(ne={exports:{}},ne.exports),ne.exports),pe={name:"JsonTree",props:{data:{requered:!0},inverted:function(){return!0}},data:function(){for(var e=[],t=0,s=this.data?Object.keys(this.data).length:0;t<s;t++)e.push(!0);return{showObj:e}},computed:{theme:function(){return void 0!==this.inverted?{label:"text-pink-4",typeString:"text-red-3",typeNumberOrBool:"text-blue-3",typeEmpty:"text-grey-5"}:{label:"text-pink-8",typeString:"text-red-6",typeNumberOrBool:"text-blue-6",typeEmpty:"text-grey-6"}}},methods:{toggle:function(e){this.$set(this.showObj,e,!this.showObj[e])}}},ue=U.normalizeComponent({render:function(){var e,r=this,t=r.$createElement,o=r._self._c||t;return r.data&&(Array.isArray(r.data)||"object"===ce(r.data))?o("div",[o("span",{class:{"text-white":void 0!==r.inverted}},[r._v(r._s(Array.isArray(r.data)?"[":"{"))]),r._l(r.data,function(e,t,s){var i;return o("div",{key:t+"-"+s,staticClass:"margin-left"},[e&&"object"===ce(e)?o("div",[o("div",{staticClass:"cursor-pointer",on:{click:function(){r.toggle(Array.isArray(r.data)?t:s)}}},[r.showObj[Array.isArray(r.data)?t:s]?o("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==r.inverted?"white":"grey-9",name:"mdi-menu-down"}}):o("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==r.inverted?"white":"grey-9",name:"mdi-menu-right"}}),o("span",{class:[r.theme.label]},[r._v(r._s(t))]),o("span",{class:{"text-white":void 0!==r.inverted}},[r._v(" : "+r._s(Array.isArray(e)?"Array ["+e.length+"]":"Object"))])],1),r.showObj[Array.isArray(r.data)?t:s]?o("json-tree",{staticClass:"margin-left",attrs:{data:e,inverted:r.inverted}}):r._e()],1):o("div",[o("span",{class:[r.theme.label]},[r._v(r._s(t))]),o("span",{class:{"text-white":void 0!==r.inverted}},[r._v(" : ")]),o("span",{class:(i={},i[r.theme.typeNumberOrBool]="number"==typeof e||"boolean"==typeof e,i[r.theme.typeString]="string"==typeof e,i[r.theme.typeEmpty]=null==e,i)},[r._v(r._s(JSON.stringify(e)))])])])}),o("span",{class:{"text-white":void 0!==r.inverted}},[r._v(r._s(Array.isArray(r.data)?"]":"}"))])],2):o("div",[o("span",{class:(e={},e[r.theme.typeNumberOrBool]="number"==typeof r.data||"boolean"==typeof r.data,e[r.theme.typeString]="string"==typeof r.data,e[r.theme.typeEmpty]=void 0===r.data||null===r.data,e),staticStyle:{"font-size":"1rem"}},[r._v(r._s(""+r.data))])])},staticRenderFns:[]},function(e){e&&e("data-v-52923dbe_0",{source:".margin-left{margin-left:16px}",map:void 0,media:void 0})},pe,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),de={name:"Message",props:["message","highlight"],computed:{canCopy:function(){return!("string"==typeof this.payload&&!this.payload.length||!this.$copyText)},payload:function(){return this.message.payload},timestamp:function(){return this.message.properties&&this.message.properties.userProperties&&this.message.properties.userProperties.timestamp?", ".concat(M.date.formatDate(1e3*this.message.properties.userProperties.timestamp,"DD/MM/YYYY HH:mm:ss")):""}},methods:{copyPayloadHandler:function(){var t=this;this.$copyText("string"==typeof this.payload?this.payload:JSON.stringify(this.payload)).then(function(e){t.$q.notify({color:"positive",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Payload copied</div>',html:!0,timeout:1e3})},function(e){t.$q.notify({color:"negative",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Coping error</div>',html:!0,timeout:1e3})})}},components:{JsonTree:ue}},me=U.normalizeComponent({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticClass:"message"},[s("div",{staticClass:"message__title q-pt-sm q-pl-sm q-pr-sm"},[s("div",{staticClass:"message__topic ellipsis",attrs:{title:e.message.topic}},[e._v("\n      "+e._s(e.message.topic)+"\n    ")]),s("div",{staticClass:"message__sys text-grey-7"},[e._v("\n      "+e._s("qos: "+e.message.qos+", dup: "+(e.message.dup?"+":"-")+", retain: "+(e.message.retain?"+":"-")+e.timestamp)+"\n    ")]),s("q-btn",{staticClass:"absolute-top-right",staticStyle:{top:"10px",right:"8px",transform:"rotate(-45deg)"},attrs:{color:"indigo-4",size:"sm",flat:"",icon:"mdi-send",round:""},on:{click:function(){return e.$emit("action:send",e.message)}}},[s("q-tooltip",{staticClass:"desktop-only"},[e._v("Resend message")])],1)],1),s("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 relative-position"},["string"!=typeof e.payload||e.payload.length?e.highlight?s("json-tree",{attrs:{data:e.payload}}):e.highlight?e._e():s("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2"},[e._v(e._s(e.message.payload))]):s("div",[e._v("No message")]),e.canCopy?s("q-btn",{staticStyle:{position:"absolute",right:"0",bottom:"2px"},attrs:{icon:"content_copy",size:"0.7rem",flat:"",color:"orange"},on:{click:e.copyPayloadHandler}}):e._e()],1),s("div",{staticClass:"message__properties q-pa-sm text-grey-7"},[e._v(e._s(JSON.stringify(e.message.properties)))])])},staticRenderFns:[]},function(e){e&&e("data-v-1b907fed_0",{source:".message .message__title[data-v-1b907fed]{height:50px;position:relative}.message .message__topic[data-v-1b907fed]{font-size:.8rem;font-weight:700;width:calc(100% - 30px)}.message .message__sys[data-v-1b907fed]{font-size:.8rem;width:calc(100% - 30px)}.message .message__payload[data-v-1b907fed]{height:calc(100% - 20px);word-break:break-all;font-size:.85rem}.message .message__properties[data-v-1b907fed]{word-break:break-all;font-size:.7rem}",map:void 0,media:void 0})},de,"data-v-1b907fed",!1,void 0,!1,U.createInjector,void 0,void 0),be={methods:{validateTopic:function(e){for(var t=e.split("/"),s=0;s<t.length;s++)if("+"!==t[s]){if("#"===t[s])return s===t.length-1;if(-1!==t[s].indexOf("+")||-1!==t[s].indexOf("#"))return!1}return!0}}},ge={name:"Subscriber",props:["value","messages","status","version","subscribed"],data:function(){return{filterMode:!1,config:this.value,loadingStatus:!1,needUseSubUserPropsToUnsub:!1,subscriberUserProperty:{value:"",name:""},unsubscribeUserProperty:{value:"",name:""},modeSelectOptions:[{label:"History",value:0},{label:"Tree",value:1}],needAutoScroll:!0,isPlayed:this.status||null,filter:"",treeSelectedTopic:null,processingFlag:null}},computed:{renderedMessages:function(){var t=this,e=[];switch(this.config.mode){case 0:e=this.filter?this.messages.filter(function(e){return-1!==e.topic.indexOf(t.filter)}):this.messages;break;case 1:e=this.messages}return e},treeModeValue:function(){var t=this,e=null;if(1===this.config.mode){if(null===this.treeSelectedTopic)return{"":{topic:"*Empty*"}};var r=this.treeSelectedTopic.split("/");(e=r.reduce(function(s,i,e){return e===r.length-1?s[i]?s[i].value&&Object.keys(s[i].value).reduce(function(e,t){return e[t]=JSON.parse(s[i].value[t]),e},{}):(t.treeValueChangeHandler(null),{"":{topic:"*Empty*"}}):s[i].children},this.messages))&&Object.keys(e).length||(e={"":{topic:this.treeSelectedTopic}})}return e},isValidSubscriber:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&(k(this.config.options.properties.subscriptionIdentifier)||0<this.config.options.properties.subscriptionIdentifier&&this.config.options.properties.subscriptionIdentifier<=268435455)},isNeedLoading:function(){return 1===this.config.mode&&this.status&&this.subscribed&&null===this.processingFlag&&this.checkProcessing(),1===this.config.mode&&this.status&&(!this.subscribed||!!this.processingFlag)}},methods:{isNil:k,checkProcessing:function(){var e=this;Object.keys(this.messages).length||(this.processingFlag=!0,setTimeout(function(){e.processingFlag=!1},500))},playStopHandler:function(){this.isPlayed?this.$emit("pause"):this.$emit("play"),this.isPlayed=!this.isPlayed},subscribeMessageHandler:function(){this.loadingStatus=!0,this.needUseSubUserPropsToUnsub&&this.$set(this.config.unsubscribeProperties,"userProperties",Object.assign({},this.config.options.properties.userProperties)),this.$emit("subscribe")},unsubscribeMessageHandler:function(){this.isPlayed=null,this.treeSelectedTopic=null,this.clearScrollParams(),this.$emit("unsubscribe"),this.processingFlag=null},removeSubscriber:function(){this.$emit("remove")},addSubscriberUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{}),this.$set(this.config.options.properties.userProperties,this.subscriberUserProperty.name,this.subscriberUserProperty.value),this.subscriberUserProperty={value:"",name:""}},removeSubscriberUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",null)},addUnsubscribeUserProperty:function(){this.config.unsubscribeProperties.userProperties||this.$set(this.config.unsubscribeProperties,"userProperties",{}),this.$set(this.config.unsubscribeProperties.userProperties,this.unsubscribeUserProperty.name,this.unsubscribeUserProperty.value),this.unsubscribeUserProperty={value:"",name:""}},removeUnsubscribeUserProperty:function(e){this.$delete(this.config.unsubscribeProperties.userProperties,e),Object.keys(this.config.unsubscribeProperties.userProperties).length||this.$set(this.config.unsubscribeProperties,"userProperties",null)},showSharedSubscriptionNotification:function(){this.$q.dialog({title:"Shared subscription info",message:"You are trying to subscribe to a Shared Subscription. Publication that matches its Topic Filter is sent to one of the subscribed sessions only.",color:"primary",ok:!0,preventClose:!0})},listScroll:function(){if(this.status){var e=this.$refs.scroller&&this.$refs.scroller.$el;if(!e)return!1;e.scrollTop<e.scrollHeight-e.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0}},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")},treeValueChangeHandler:function(e){this.treeSelectedTopic=e},changeModeHandler:function(){this.treeSelectedTopic=null}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},status:function(e){e&&this.loadingStatus?(this.loadingStatus=!1,this.isPlayed=!0):this.isPlayed=null},value:{deep:!0,handler:function(e){this.config=e}}},components:{VirtualList:T,Message:me,Tree:oe},directives:{autoscroll:{inserted:function(e,t){t.value&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout(function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},50)}}},mixins:[be]},he=U.normalizeComponent({render:function(){var i=this,e=i.$createElement,r=i._self._c||e;return r("div",{staticClass:"mqtt-client__subscriber col-md-6 col-sm-12 col-xs-12"},[i.status||null!==i.isPlayed?r("q-card",{staticClass:"subscriber__item q-ma-sm"},[i.filterMode?r("q-input",{staticClass:"q-ma-sm q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:i.filter,callback:function(e){i.filter=e},expression:"filter"}},[r("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(){i.filterMode=!1,i.filter=""}},slot:"prepend"}),i.filter?r("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(){i.filter=""}},slot:"append"}):i._e()],1):r("q-toolbar",{staticClass:"q-pr-none text-white bg-orange",staticStyle:{"border-top-right-radius":"0","border-top-left-radius":"0"}},[r("q-toolbar-title",{staticStyle:{width:"calc(100% - 150px)"}},[r("span",[i._v("\n          "+i._s(i.config.topic)+"\n          "),r("q-tooltip",[i._v(i._s(i.config.topic))])],1)]),0===i.config.mode?r("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(){i.filterMode=!0}}}):i._e(),r("q-btn",{attrs:{round:"",flat:"",icon:"mdi-stop",title:"Unsubscribe"},on:{click:function(){return i.unsubscribeMessageHandler()}}}),r("q-btn",{attrs:{round:"",flat:"",icon:i.isPlayed&&"paused"!==i.status?"mdi-pause":"mdi-play",title:i.isPlayed&&"paused"!==i.status?"Pause":"Resume"},on:{click:i.playStopHandler}},["paused"===i.status&&i.value.missedMessages?r("q-chip",{staticClass:"absolute-top-right",staticStyle:{top:"-5px",right:"-5px"},attrs:{color:"red",dense:"","text-color":"white",size:".6rem",square:""}},[i._v("\n          "+i._s(i.value.missedMessages)+"\n        ")]):i._e()],1),r("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[r("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[r("q-list",[0===i.config.mode?r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return i.clearMessagesHandler(e)}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),r("q-item-section",[r("q-item-label",[i._v("Clear messages")])],1)],1):i._e(),0===i.config.mode?r("q-separator",{attrs:{spaced:""}}):i._e(),r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{highlight:"",clickable:""},nativeOn:{click:function(){return i.removeSubscriber()}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),r("q-item-section",[r("q-item-label",[i._v("Remove")])],1)],1)],1)],1)],1)],1),r("div",{staticStyle:{position:"relative"},style:{height:"calc(100% - "+(i.filterMode?"62px":"50px")+")"}},[i.messages&&i.messages.length&&0===i.config.mode?r("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:i.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"subscriber__list",attrs:{onscroll:i.listScroll,debounce:10,size:110,remain:15}},i._l(i.renderedMessages,function(e,t){return r("message",{key:"subMsg$"+t,attrs:{message:e,highlight:i.config.highlight},on:{"action:send":function(e){i.$emit("action:send",e)}}})}),1):1===i.config.mode&&Object.keys(i.renderedMessages).length&&i.subscribed?r("div",{staticClass:"subscriber__list subscriber__list--tree"},[r("div",{staticClass:"scroll",staticStyle:{height:"60%"}},[r("tree",{attrs:{topic:i.treeSelectedTopic,data:i.renderedMessages},on:{change:i.treeValueChangeHandler}})],1),r("div",{staticClass:"scroll tree__message"},[i._l(i.treeModeValue,function(e,t,s){return[void 0!==e.payload?r("message",{key:"tree-message-"+t+"-"+s,attrs:{message:e,highlight:i.config.highlight},on:{"action:send":function(e){i.$emit("action:send",e)}}}):r("div",{key:"tree-message-empty-"+s,staticClass:"text-center",staticStyle:{height:"100%"}},[r("div",{staticClass:"q-pt-sm text-grey-9",staticStyle:{"font-size":"1.5rem"}},[i._v("No messages")]),r("div",{staticClass:"text-grey-8"},[i._v(i._s(e.topic))]),r("q-icon",{attrs:{color:"red",name:"mail",size:"5rem"}})],1)]})],2)]):i.status&&i.subscribed&&!i.processingFlag?r("div",{staticClass:"subscriber__list--empty"},[i._v("No messages")]):i._e(),r("q-inner-loading",{attrs:{showing:i.isNeedLoading}},[r("q-spinner-gears",{attrs:{size:"150px",color:"orange"}})],1)],1)],1):r("q-card",{staticClass:"subscriber__item q-ma-sm"},[r("q-card-section",{staticClass:"q-pa-none"},[r("q-toolbar",{staticClass:"q-pr-none text-white bg-orange"},[r("q-toolbar-title",[i._v("Subscriber")]),r("q-btn",{attrs:{round:"",flat:"",disable:!i.isValidSubscriber,icon:"mdi-play"},on:{click:i.subscribeMessageHandler}},[r("q-tooltip",[i._v("Subscribe")])],1),r("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[r("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[r("q-list",[r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(){return i.removeSubscriber()}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),r("q-item-section",[r("q-item-label",[i._v("Remove")])],1)],1)],1)],1)],1)],1)],1),r("q-card-section",{staticClass:"item__main q-py-none"},[r("div",{staticClass:"q-pt-md"},[r("q-input",{staticClass:"q-mb-xs",attrs:{disable:i.status,color:"grey-9",outlined:"","hide-bottom-space":"",label:"Topic",error:!i.isValidSubscriber},model:{value:i.config.topic,callback:function(e){i.$set(i.config,"topic",e)},expression:"config.topic"}},[0===i.config.topic.indexOf("$share")?r("q-btn",{attrs:{slot:"append",color:"yellow-9",icon:"mdi-alert",flat:"",round:""},on:{click:i.showSharedSubscriptionNotification},slot:"append"}):i._e()],1),r("q-btn-toggle",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mt-md",staticStyle:{width:"100%"},attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:i.modeSelectOptions},on:{input:i.changeModeHandler},model:{value:i.config.mode,callback:function(e){i.$set(i.config,"mode",e)},expression:"config.mode"}}),1===i.config.mode&&5===i.version?r("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Field to group by",hint:"User properties field name by which messages will be grouped."},model:{value:i.config.treeField,callback:function(e){i.$set(i.config,"treeField",e)},expression:"config.treeField"}}):i._e(),r("q-toggle",{staticClass:"q-my-md",attrs:{color:"grey-9",label:"Highlight messages content"},model:{value:i.config.highlight,callback:function(e){i.$set(i.config,"highlight",e)},expression:"config.highlight"}}),r("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[r("div",{staticClass:"q-pa-sm"},[r("div",{staticClass:"q-px-md q-py-sm"},[i._v("\n              QoS\n              "),r("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:i.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:i.config.options.qos,callback:function(e){i.$set(i.config.options,"qos",e)},expression:"config.options.qos"}})],1),5===i.version?r("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{disable:i.status,color:"grey-9",label:"No local"},model:{value:i.config.options.nl,callback:function(e){i.$set(i.config.options,"nl",e)},expression:"config.options.nl"}}):i._e(),5===i.version?r("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{disable:i.status,color:"grey-9",label:"Retain as Published"},model:{value:i.config.options.rap,callback:function(e){i.$set(i.config.options,"rap",e)},expression:"config.options.rap"}}):i._e(),5===i.version?r("div",[r("div",{staticClass:"q-mb-sm"},[i._v("\n                Retain handling\n                "),r("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:i.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:i.config.options.rh,callback:function(e){i.$set(i.config.options,"rh",e)},expression:"config.options.rh"}})],1)]):i._e(),5===i.version?r("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties"}},[r("div",{staticClass:"q-px-md q-py-sm"},[r("q-input",{staticClass:"q-my-xs",attrs:{disable:i.status,color:"grey-9",label:"Subscription identifier",clearable:"",type:"number",outlined:"","hide-bottom-space":"",error:!i.isNil(i.config.options.properties.subscriptionIdentifier)&&(i.config.options.properties.subscriptionIdentifier<=0||268435455<i.config.options.properties.subscriptionIdentifier)},on:{clear:function(){i.config.options.properties.subscriptionIdentifier=void 0}},model:{value:i.config.options.properties.subscriptionIdentifier,callback:function(e){i.$set(i.config.options.properties,"subscriptionIdentifier",e)},expression:"config.options.properties.subscriptionIdentifier"}}),!i.status||i.config.options.properties.userProperties?r("div",[r("div",{staticClass:"q-mt-md"},[i._v("User Properties")]),r("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Also use to unsubscribe"},model:{value:i.needUseSubUserPropsToUnsub,callback:function(e){i.needUseSubUserPropsToUnsub=e},expression:"needUseSubUserPropsToUnsub"}}),r("div",[i.config.options.properties.userProperties?r("q-list",{staticClass:"q-mb-xs"},i._l(i.config.options.properties.userProperties,function(e,t){return r("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[i.status?i._e():r("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return i.removeSubscriberUserProperty(t)}}}),r("span",[i._v(i._s(t+": "+e))])],1)}),1):i._e(),i.status?i._e():r("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property name"},model:{value:i.subscriberUserProperty.name,callback:function(e){i.$set(i.subscriberUserProperty,"name",e)},expression:"subscriberUserProperty.name"}}),i.status?i._e():r("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property value"},model:{value:i.subscriberUserProperty.value,callback:function(e){i.$set(i.subscriberUserProperty,"value",e)},expression:"subscriberUserProperty.value"}}),i.status?i._e():r("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!i.subscriberUserProperty.name||!i.subscriberUserProperty.value,color:"grey-9"},on:{click:i.addSubscriberUserProperty}},[i._v("Add")])],1)],1):i._e()],1)]):i._e(),5!==i.version||i.needUseSubUserPropsToUnsub?i._e():r("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{value:!!i.config.unsubscribeProperties.userProperties,label:"Unsubscribe properties"}},[!i.status||i.config.unsubscribeProperties.userProperties?r("div",{staticClass:"q-px-md q-py-sm"},[r("div",{staticClass:"q-mt-md"},[i._v("User Properties")]),r("div",[i.config.unsubscribeProperties.userProperties?r("q-list",{staticClass:"q-mb-xs"},i._l(i.config.unsubscribeProperties.userProperties,function(e,t){return r("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[i.status?i._e():r("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return i.removeUnsubscribeUserProperty(t)}}}),r("span",[i._v(i._s(t+": "+e))])],1)}),1):i._e(),i.status?i._e():r("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:i.unsubscribeUserProperty.name,callback:function(e){i.$set(i.unsubscribeUserProperty,"name",e)},expression:"unsubscribeUserProperty.name"}}),i.status?i._e():r("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:i.unsubscribeUserProperty.value,callback:function(e){i.$set(i.unsubscribeUserProperty,"value",e)},expression:"unsubscribeUserProperty.value"}}),i.status?i._e():r("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!i.unsubscribeUserProperty.name||!i.unsubscribeUserProperty.value,color:"grey-9"},on:{click:i.addUnsubscribeUserProperty}},[i._v("Add")])],1)]):i._e()])],1)])],1)])],1)],1)},staticRenderFns:[]},function(e){e&&e("data-v-5c1651f5_0",{source:".mqtt-client__subscriber .subscriber__item{border:2px solid orange;height:calc(100% - 16px);position:relative}.mqtt-client__subscriber .subscriber__item .item__main{position:relative;height:calc(100% - 50px);overflow:auto}.mqtt-client__subscriber .subscriber__list{position:absolute;top:0;bottom:0;right:0;left:0;height:auto!important}.mqtt-client__subscriber .subscriber__list .tree__message{height:40%;box-shadow:0 1px 5px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.12)}.mqtt-client__subscriber .subscriber__list--empty{text-align:center;margin-top:10px;font-size:1.3rem;color:#333}",map:void 0,media:void 0})},ge,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),fe={},ve={name:"Publisher",props:["value","version"],data:function(){return{config:this.value,publishUserProperty:{value:"",name:""}}},computed:{isValidPublisher:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&(k(this.config.options.properties.messageExpiryInterval)||0<=this.config.options.properties.messageExpiryInterval&&this.config.options.properties.messageExpiryInterval<=4294967295)&&(k(this.config.options.properties.topicAlias)||0<this.config.options.properties.topicAlias&&this.config.options.properties.topicAlias<=65535)}},methods:{isNil:k,addPublishUserProperty:function(){this.config.options.properties.userProperties||fe.set(this.config.options.properties,"userProperties",{}),fe.set(this.config.options.properties.userProperties,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){fe.delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||fe.set(this.config.options.properties,"userProperties",null)}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},value:{deep:!0,handler:function(e){this.config=e}}},mixins:[be]},ye=U.normalizeComponent({render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"mqtt-client__publisher col-md-6 col-sm-12 col-xs-12"},[i("q-card",{staticClass:"publisher__item q-ma-sm"},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none text-white bg-indigo"},[i("q-toolbar-title",[s._v("Publisher")]),i("q-btn",{attrs:{round:"",disable:!s.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(){return s.$emit("publish")}}},[i("q-tooltip",[s._v("Publish")])],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(){return s.$emit("remove")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),i("q-item-section",[i("q-item-label",[s._v("Remove")])],1)],1)],1)],1)],1)],1)],1),i("q-card-section",{staticClass:"publisher__main q-pb-none"},[i("div",{staticClass:"q-mt-md"},[i("q-input",{staticClass:"q-mb-xs q-mt-sm",attrs:{color:"grey-9",label:"Topic",error:!s.isValidPublisher,outlined:"","hide-bottom-space":""},model:{value:s.config.topic,callback:function(e){s.$set(s.config,"topic",e)},expression:"config.topic"}}),i("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea",label:"Message"},model:{value:s.config.payload,callback:function(e){s.$set(s.config,"payload",e)},expression:"config.payload"}}),i("q-expansion-item",{staticClass:"q-my-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[i("div",{staticClass:"q-pa-sm"},[i("div",{staticClass:"q-px-md q-py-sm"},[i("div",{staticClass:"q-mb-sm"},[s._v("\n                QoS\n                "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:s.config.options.qos,callback:function(e){s.$set(s.config.options,"qos",e)},expression:"config.options.qos"}})],1)]),i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Retain"},model:{value:s.config.options.retain,callback:function(e){s.$set(s.config.options,"retain",e)},expression:"config.options.retain"}}),i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:s.config.options.dup,callback:function(e){s.$set(s.config.options,"dup",e)},expression:"config.options.dup"}}),5===s.version?i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties"}},[i("div",{staticClass:"q-px-md q-py-sm"},[i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:s.config.options.properties.payloadFormatIndicator,callback:function(e){s.$set(s.config.options.properties,"payloadFormatIndicator",e)},expression:"config.options.properties.payloadFormatIndicator"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":"",error:!s.isNil(s.config.options.properties.messageExpiryInterval)&&(s.config.options.properties.messageExpiryInterval<0||4294967295<s.config.options.properties.messageExpiryInterval)},on:{clear:function(){s.config.options.properties.messageExpiryInterval=void 0}},model:{value:s.config.options.properties.messageExpiryInterval,callback:function(e){s.$set(s.config.options.properties,"messageExpiryInterval",e)},expression:"config.options.properties.messageExpiryInterval"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",clearable:"",outlined:"","hide-bottom-space":"",error:!s.isNil(s.config.options.properties.topicAlias)&&(s.config.options.properties.topicAlias<=0||65535<s.config.options.properties.topicAlias)},on:{clear:function(){s.config.options.properties.topicAlias=void 0}},model:{value:s.config.options.properties.topicAlias,callback:function(e){s.$set(s.config.options.properties,"topicAlias",e)},expression:"config.options.properties.topicAlias"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:s.config.options.properties.responseTopic,callback:function(e){s.$set(s.config.options.properties,"responseTopic",e)},expression:"config.options.properties.responseTopic"}}),i("q-input",{staticClass:"q-textarea--fix q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"textarea",autogrow:"",label:"Correlation data"},model:{value:s.config.options.properties.correlationData,callback:function(e){s.$set(s.config.options.properties,"correlationData",e)},expression:"config.options.properties.correlationData"}}),i("div",{staticClass:"q-mb-sm"},[i("div",{staticClass:"q-mt-md"},[s._v("User Properties")]),i("div",[s.config.options.properties.userProperties?i("q-list",{staticClass:"q-mb-xs"},s._l(s.config.options.properties.userProperties,function(e,t){return i("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return s.removePublishUserProperty(t)}}}),i("span",[s._v(s._s(t+": "+e))])],1)}),1):s._e(),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:s.publishUserProperty.name,callback:function(e){s.$set(s.publishUserProperty,"name",e)},expression:"publishUserProperty.name"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:s.publishUserProperty.value,callback:function(e){s.$set(s.publishUserProperty,"value",e)},expression:"publishUserProperty.value"}}),i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!s.publishUserProperty.name||!s.publishUserProperty.value,color:"grey-9"},on:{click:function(){return s.addPublishUserProperty()}}},[s._v("Add")])],1)]),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:s.config.options.properties.contentType,callback:function(e){s.$set(s.config.options.properties,"contentType",e)},expression:"config.options.properties.contentType"}})],1)]):s._e()],1)])],1)])],1)],1)},staticRenderFns:[]},function(e){e&&e("data-v-08689c87_0",{source:".q-textarea--fix.q-textarea.q-field--labeled textarea.q-field__native{min-height:27px}.mqtt-client__publisher .publisher__item{border:2px solid #3f51b5;height:calc(100% - 16px);position:relative}.mqtt-client__publisher .publisher__remove{position:absolute;top:5px;right:5px}.mqtt-client__publisher .publisher__main{position:relative;height:calc(100% - 50px);overflow:auto}",map:void 0,media:void 0})},ve,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),qe={name:"Unresolved",props:["messages"],data:function(){return{filter:"",needAutoScroll:!0,filterMode:!1}},computed:{filteredNotResolvedMessages:function(){var t=this;return this.messages.filter(function(e){return-1!==e.topic.indexOf(t.filter)})}},methods:{listScroll:function(){var e=this.$refs.scroller&&this.$refs.scroller.$el;if(!e)return!1;e.scrollTop<e.scrollHeight-e.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")}},components:{VirtualList:T,Message:me},directives:{autoscroll:{inserted:function(e,t){t.value&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout(function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},50)}}}},xe=U.normalizeComponent({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mqtt-client__not-resolved-msgs col-md-6 col-sm-12 col-xs-12"},[s("q-card",{staticClass:"not-resolved-msgs__main q-ma-sm"},[s("q-card-section",{staticClass:"q-pa-none"},[t.filterMode?s("q-input",{staticClass:"q-ma-sm q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[s("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(){t.filterMode=!1,t.filter=""}},slot:"prepend"}),t.filter?s("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(){t.filter=""}},slot:"append"}):t._e()],1):s("q-toolbar",{staticClass:"q-pr-none text-white bg-red-6"},[s("q-toolbar-title",[t._v("Unresolved messages")]),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(){t.filterMode=!0}}}),s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[s("q-list",[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return t.clearMessagesHandler(e)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),s("q-item-section",[s("q-item-label",[t._v("Clear messages")])],1)],1)],1)],1)],1)],1)],1),s("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:t.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"not-resolved-msgs__list",attrs:{size:110,remain:15,onscroll:t.listScroll}},t._l(t.filteredNotResolvedMessages,function(e,t){return s("message",{key:"subNRMsg"+t,attrs:{message:e}})}),1)],1)],1)},staticRenderFns:[]},function(e){e&&e("data-v-4acab326_0",{source:".mqtt-client__not-resolved-msgs .not-resolved-msgs__main{position:relative;border:2px solid red;height:calc(100% - 16px)}.mqtt-client__not-resolved-msgs .not-resolved-msgs__list{position:absolute;top:50px;bottom:0;right:0;left:0;height:auto!important}",map:void 0,media:void 0})},qe,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),Se={name:"Logs",props:["logs"],data:function(){return{needAutoScroll:!0,colors:{connect:"green",error:"red",offline:"grey",reconnect:"yellow",subscribe:"orange",unsubscribe:"purple",disconnect:"red",end:"grey",created:"green",updated:"yellow"},date:M.date,codes:{0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"}}},methods:{getColor:function(e){return"connect"===e.type&&(this.codes[e.data.returnCode]||this.codes[e.data.reasonCode])?"red":"subscribe"===e.type&&e.data.restored?"blue":"subscribe"===e.type&&e.data.grants&&0<(128&e.data.grants[0].qos)?"red":"disconnect"===e.type&&e.data?"brown":this.colors[e.type]},listScroll:function(){var e=this.$refs.scroller.$el;e.scrollTop<e.scrollHeight-e.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearLogsHandler:function(){this.$emit("clear")}},created:function(){var t=this;this.$nextTick(function(){if(t.needAutoScroll&&t.$refs.scroller){var e=t.$refs.scroller.$el;e.scrollTop=e.scrollHeight-e.clientHeight}})},directives:{autoscroll:{inserted:function(e,t){t.value&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var s=t.value;setTimeout(function(){s&&(e.scrollTop=e.scrollHeight-e.clientHeight)},50)}}},components:{JsonTree:ue}},_e=U.normalizeComponent({render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"mqtt-client__logs col-xl-3 col-md-6 col-sm-12 col-xs-12"},[i("q-card",{staticClass:"logs__wrapper q-ma-sm",staticStyle:{overflow:"hidden"}},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none text-white bg-blue"},[i("q-toolbar-title",[s._v("Logs")]),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return s.clearLogsHandler(e)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),i("q-item-section",[i("q-item-label",[s._v("Clear logs")])],1)],1)],1)],1)],1)],1)],1),i("q-card-section",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:s.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"scroll q-pa-md",staticStyle:{height:"calc(100% - 50px)"},nativeOn:{scroll:function(e){return s.listScroll(e)}}},s._l(s.logs,function(e,t){return i("q-card",{key:"log"+t,staticClass:"log__item q-mt-md",class:["bg-"+s.getColor(e)+"-3"]},[i("div",{staticClass:"log__title q-py-xs q-px-sm text-bold"},[s._v("\n          "+s._s(e.type)+"\n        ")]),"offline"===e.type||"reconnect"===e.type||"end"===e.type?[i("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}})]:"disconnect"===e.type?[e.data?i("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[s._v("\n            disconnected by broker:\n            "),i("div",[s._v(s._s(e.data.reasonCode+": "+s.codes[e.data.reasonCode]))])]):s._e()]:"created"===e.type||"updated"===e.type?[i("div",{staticClass:"log__payload q-px-sm q-pt-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[i("json-tree",{attrs:{data:e.data}})],1)])]:"connect"===e.type?[s.codes[e.data.returnCode]||s.codes[e.data.reasonCode]?i("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2"},[s._v("\n            "+s._s(s.codes[e.data.returnCode]||s.codes[e.data.reasonCode])+"\n          ")]):s._e(),e.data.properties?i("div",{staticClass:"log__properties q-pt-xs q-mr-xs q-ml-xs text-grey-7 bg-green-1",staticStyle:{"font-size":".75rem","word-break":"break-all"}},[i("json-tree",{attrs:{data:e.data.properties}})],1):s._e()]:"error"===e.type?[i("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[s._v(s._s(e.data.error.message))])])]:"subscribe"===e.type?[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 row",staticStyle:{"font-size":".75rem"}},[e.data.restored?s._e():i("div",{staticClass:"col-6 q-pr-xs"},[i("div",{staticClass:"text-bold"},[s._v("Request")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[s._v("Topic: ")]),s._v(s._s(e.data.settings.topic))]),i("div",[i("span",{staticClass:"text-bold"},[s._v("QoS: ")]),s._v(s._s(e.data.settings.options.qos))]),void 0!==e.data.settings.options.nl?i("div",[i("span",{staticClass:"text-bold"},[s._v("No Local: ")]),s._v(s._s(e.data.settings.options.nl))]):s._e(),void 0!==e.data.settings.options.rap?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain as Published: ")]),s._v(s._s(e.data.settings.options.rap))]):s._e(),void 0!==e.data.settings.options.rh?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain handling: ")]),s._v(s._s(e.data.settings.options.rh))]):s._e()]),e.data.grants[0]&&0==(128&e.data.grants[0].qos)?i("div",{staticClass:"col-6 q-pl-xs"},[e.data.restored?i("div",{staticClass:"col-6 q-pr-xs text-bold"},[s._v("Access (restored by broker)")]):i("div",{staticClass:"col-6 q-pr-xs text-bold"},[s._v("Access")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[s._v("Topic: ")]),s._v(s._s(e.data.grants[0].topic))]),i("div",[i("span",{staticClass:"text-bold"},[s._v("QoS: ")]),s._v(s._s(e.data.grants[0].qos))]),void 0!==e.data.grants[0].nl?i("div",[i("span",{staticClass:"text-bold"},[s._v("No Local: ")]),s._v(s._s(e.data.grants[0].nl))]):s._e(),void 0!==e.data.grants[0].rap?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain as Published: ")]),s._v(s._s(e.data.grants[0].rap))]):s._e(),void 0!==e.data.grants[0].rh?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain handling: ")]),s._v(s._s(e.data.grants[0].rh))]):s._e()]):s._e(),e.data.grants[0]&&0<(128&e.data.grants[0].qos)?i("div",[i("div",{staticClass:"col-6 q-pr-xs text-bold"},[s._v("Error")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[s._v("Topic: ")]),s._v(s._s(e.data.grants[0].topic))]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[s._v("Message: ")]),s._v(s._s(s.codes[e.data.grants[0].qos]))])]):s._e()])]:"unsubscribe"===e.type?[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[s._v("Topic: ")]),s._v(s._s(e.data.topic))]),i("div",[i("span",{staticClass:"text-bold"},[s._v("QoS: ")]),s._v(s._s(e.data.options.qos))]),void 0!==e.data.options.nl?i("div",[i("span",{staticClass:"text-bold"},[s._v("No Local: ")]),s._v(s._s(e.data.options.nl))]):s._e(),void 0!==e.data.options.rap?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain as Published: ")]),s._v(s._s(e.data.options.rap))]):s._e(),void 0!==e.data.options.rh?i("div",[i("span",{staticClass:"text-bold"},[s._v("Retain handling: ")]),s._v(s._s(e.data.options.rh))]):s._e()])]:[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[s._v(s._s(e.data))])])],i("div",{staticClass:"log__timestamp q-py-xs q-px-sm text-grey-7"},[s._v(s._s(s.date.formatDate(e.timestamp,"DD/MM/YYYY HH:mm:ss")))])],2)}),1)],1)],1)},staticRenderFns:[]},function(e){e&&e("data-v-3df3db7a_0",{source:".mqtt-client__logs .logs__wrapper{border:2px solid #2196f3;height:calc(100% - 16px);position:relative;overflow:auto}",map:void 0,media:void 0})},Se,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),Ce={name:"PublisherModal",props:["message","version"],data:function(){return{config:{topic:this.message.topic,payload:JSON.stringify(this.message.payload),options:{qos:this.message.qos,retain:this.message.retain,dup:this.message.dup,properties:w(this.message.properties)}},publishUserProperty:{value:"",name:""}}},computed:{isValidPublisher:function(){return!!this.config.topic&&this.validateTopic(this.config.topic)&&(4===this.version||5===this.version&&(k(this.config.options.properties.messageExpiryInterval)||0<=this.config.options.properties.messageExpiryInterval&&this.config.options.properties.messageExpiryInterval<=4294967295)&&(k(this.config.options.properties.topicAlias)||0<this.config.options.properties.topicAlias&&this.config.options.properties.topicAlias<=65535))}},methods:{isNil:k,addPublishUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{}),this.$set(this.config.options.properties.userProperties,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",null)},show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()}},mixins:[be]},we=U.normalizeComponent({render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("q-dialog",{ref:"modal",staticClass:"mqtt-board-modal mqtt-board-publisher-modal",attrs:{maximized:s.$q.platform.is.mobile},on:{show:function(){return s.$emit("show")},hide:function(){return s.$emit("hide")}}},[i("q-card",{style:{width:s.$q.platform.is.mobile?"100%":"50vw"}},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none bg-indigo text-white"},[i("q-toolbar-title",[s._v("Publisher")]),i("q-btn",{attrs:{round:"",disable:!s.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(){s.$emit("publish",s.config),s.hide()}}},[i("q-tooltip",[s._v("Publish")])],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-close"},on:{click:s.hide}})],1)],1),i("q-separator"),i("q-card-section",{staticClass:"scroll q-pa-none",style:{height:s.$q.platform.is.mobile?"calc(100% - 50px)":"70vh"}},[i("div",{staticClass:"mqtt-client__publisher"},[i("div",{staticClass:"q-pa-md"},[i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Topic",error:!s.isValidPublisher},model:{value:s.config.topic,callback:function(e){s.$set(s.config,"topic",e)},expression:"config.topic"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea q-textarea--fix",label:"Message"},model:{value:s.config.payload,callback:function(e){s.$set(s.config,"payload",e)},expression:"config.payload"}}),i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[i("div",{staticClass:"q-pa-sm"},[i("div",{staticClass:"q-px-md q-py-sm"},[i("div",{staticClass:"q-mb-sm"},[s._v("\n                  QoS\n                  "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:s.config.options.qos,callback:function(e){s.$set(s.config.options,"qos",e)},expression:"config.options.qos"}})],1)]),i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Retain"},model:{value:s.config.options.retain,callback:function(e){s.$set(s.config.options,"retain",e)},expression:"config.options.retain"}}),i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:s.config.options.dup,callback:function(e){s.$set(s.config.options,"dup",e)},expression:"config.options.dup"}}),5===s.version?i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties",value:!0}},[i("div",{staticClass:"q-px-md q-py-sm"},[i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:s.config.options.properties.payloadFormatIndicator,callback:function(e){s.$set(s.config.options.properties,"payloadFormatIndicator",e)},expression:"config.options.properties.payloadFormatIndicator"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":"",error:!s.isNil(s.config.options.properties.messageExpiryInterval)&&(s.config.options.properties.messageExpiryInterval<0||4294967295<s.config.options.properties.messageExpiryInterval)},on:{clear:function(){s.config.options.properties.messageExpiryInterval=void 0}},model:{value:s.config.options.properties.messageExpiryInterval,callback:function(e){s.$set(s.config.options.properties,"messageExpiryInterval",e)},expression:"config.options.properties.messageExpiryInterval"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",clearable:"",outlined:"","hide-bottom-space":"",error:!s.isNil(s.config.options.properties.topicAlias)&&(s.config.options.properties.topicAlias<=0||65535<s.config.options.properties.topicAlias)},on:{clear:function(){s.config.options.properties.topicAlias=void 0}},model:{value:s.config.options.properties.topicAlias,callback:function(e){s.$set(s.config.options.properties,"topicAlias",e)},expression:"config.options.properties.topicAlias"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:s.config.options.properties.responseTopic,callback:function(e){s.$set(s.config.options.properties,"responseTopic",e)},expression:"config.options.properties.responseTopic"}}),i("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",autogrow:"",label:"Correlation data",outlined:"","hide-bottom-space":""},model:{value:s.config.options.properties.correlationData,callback:function(e){s.$set(s.config.options.properties,"correlationData",e)},expression:"config.options.properties.correlationData"}}),i("div",{staticClass:"q-mb-sm"},[i("div",{staticClass:"q-mt-md"},[s._v("User Properties")]),i("div",[s.config.options.properties.userProperties?i("q-list",{staticClass:"q-mb-xs"},s._l(s.config.options.properties.userProperties,function(e,t){return i("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return s.removePublishUserProperty(t)}}}),i("span",[s._v(s._s(t+": "+e))])],1)}),1):s._e(),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:s.publishUserProperty.name,callback:function(e){s.$set(s.publishUserProperty,"name",e)},expression:"publishUserProperty.name"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:s.publishUserProperty.value,callback:function(e){s.$set(s.publishUserProperty,"value",e)},expression:"publishUserProperty.value"}}),i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!s.publishUserProperty.name||!s.publishUserProperty.value,color:"grey-9"},on:{click:function(){return s.addPublishUserProperty()}}},[s._v("Add")])],1)]),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:s.config.options.properties.contentType,callback:function(e){s.$set(s.config.options.properties,"contentType",e)},expression:"config.options.properties.contentType"}})],1)]):s._e()],1)])],1)])])],1)],1)},staticRenderFns:[]},function(e){e&&e("data-v-4979647c_0",{source:".q-textarea--fix.q-textarea.q-field--labeled textarea.q-field__native{min-height:27px}.mqtt-client__publisher .publisher__item{border:2px solid #3f51b5;height:calc(100% - 16px);position:relative}.mqtt-client__publisher .publisher__main{position:relative;height:calc(100% - 50px)}",map:void 0,media:void 0})},Ce,void 0,!1,void 0,!1,U.createInjector,void 0,void 0),ke={topic:"string",payload:"string",options:{qos:"number",retain:"boolean",dup:"boolean",properties:{payloadFormatIndicator:"boolean",messageExpiryInterval:"number",topicAlias:"number",responseTopic:"string",correlationData:"string",userProperties:{},contentType:"string"}}},Pe={topic:"string",mode:"number",options:{qos:"number",nl:"boolean",rap:"boolean",rh:"number",properties:{subscriptionIdentifier:"number",userProperties:{}}}},$e={clientId:"string",host:"string",keepalive:"number",protocolVersion:"number",clean:"boolean",username:"string",password:"string",properties:{sessionExpiryInterval:"number",receiveMaximum:"number",maximumPacketSize:"number",topicAliasMaximum:"number",requestResponseInformation:"boolean",requestProblemInformation:"boolean",userProperties:{},authenticationMethod:"string",authenticationData:"string"},will:{topic:"string",payload:"string",qos:"number",retain:"boolean",properties:{willDelayInterval:"number",payloadFormatIndicator:"boolean",messageExpiryInterval:"number",contentType:"string",responseTopic:"string",correlationData:"string",userProperties:{}}}},Me={type:"string",index:"number",id:"string"},Ue={methods:{validateObjectBySchema:function(i,r){var o=this;return Object.keys(r).reduce(function(e,t){if(void 0!==i[t]&&null!==i[t]){var s=ce(i[t]);e="object"===ce(r[t])?e&&o.validateObjectBySchema(i[t],r[t]):s===r[t]?e&&!0:e&&!1}return e},!0)},validateEntity:function(e){switch(e.type){case"publisher":return this.validatePublisher(e.settings);case"subscriber":return this.validateSubscriber(e.settings);default:return!1}},validateSettings:function(e){return this.validateObjectBySchema(e,$e)&&!!e.clientId&&!!e.host&&(k(e.keepalive)||0<=e.keepalive&&e.keepalive<=65535)&&(!e.will||!!e.will&&(!!e.will.topic&&!!e.will.payload||!e.will.topic&&!e.will.payload))&&(!e.properties||!!e.properties&&(k(e.properties.sessionExpiryInterval)||0<=e.properties.sessionExpiryInterval&&e.properties.sessionExpiryInterval<=4294967295)&&(k(e.properties.receiveMaximum)||0<e.properties.receiveMaximum&&e.properties.receiveMaximum<=65535)&&(k(e.properties.maximumPacketSize)||0<e.properties.maximumPacketSize&&e.properties.maximumPacketSize<=4294967295)&&(k(e.properties.topicAliasMaximum)||0<=e.properties.topicAliasMaximum&&e.properties.topicAliasMaximum<=65535))},validatePublisher:function(e){return this.validateObjectBySchema(e,ke)&&!!e.topic&&!!e.options&&(!e.options.properties||!!e.options.properties&&(k(e.options.properties.messageExpiryInterval)||0<=e.options.properties.messageExpiryInterval&&e.options.properties.messageExpiryInterval<=4294967295)&&(k(e.options.properties.topicAlias)||0<e.options.properties.topicAlias&&e.options.properties.topicAlias<=65535))},validateSubscriber:function(e){return this.validateObjectBySchema(e,Pe)&&!!e.topic&&!!e.options&&(!e.options.properties||!!e.options.properties&&(k(e.options.properties.subscriptionIdentifier)||0<e.options.properties.subscriptionIdentifier&&e.options.properties.subscriptionIdentifier<=268435455))},validateEntityRecord:function(e){return this.validateObjectBySchema(e,Me)}}},Ie={clientId:"mqtt-board-".concat(Math.random().toString(16).substr(2,8)),wsOptions:{objectMode:!1,perMessageDeflate:!0},host:"wss://mqtt.flespi.io",keepalive:420,protocolVersion:5,resubscribe:!1,clean:!0,username:"FlespiToken XXXXXXXXXXXXXXXXXXX",password:"",properties:{sessionExpiryInterval:void 0,receiveMaximum:void 0,maximumPacketSize:void 0,topicAliasMaximum:void 0,requestResponseInformation:!1,requestProblemInformation:!1,userProperties:void 0,authenticationMethod:void 0,authenticationData:void 0},will:{topic:void 0,payload:void 0,qos:0,retain:!1,properties:{willDelayInterval:void 0,payloadFormatIndicator:!1,messageExpiryInterval:void 0,contentType:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0}}},je={topic:"#",mode:0,treeField:"",highlight:!0,options:{qos:0,nl:!1,rap:!1,rh:0,properties:{subscriptionIdentifier:void 0,userProperties:void 0}},unsubscribeProperties:{userProperties:void 0}},Oe={topic:"my/topic",payload:'{"hello": "world"}',options:{qos:0,retain:!1,dup:!1,properties:{payloadFormatIndicator:void 0,messageExpiryInterval:void 0,topicAlias:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0,contentType:void 0}}};function Te(e,u,t){function s(e,r,t){var s=e.split("/"),o=t,n="";s.forEach(function(e,t,s){if(o[e]||fe.set(o,e,{children:void 0,topic:"",value:void 0}),0!==t&&(n+="/"),n+="".concat(e),fe.set(o[e],"topic",n),t!==s.length-1)o[e].children||fe.set(o[e],"children",{}),o=o[e].children;else{o[e].value||fe.set(o[e],"value",{});var i=r.properties&&r.properties.userProperties&&r.properties.userProperties[u]?r.properties.userProperties[u]:"";fe.set(o[e].value,i,JSON.stringify(r))}})}function i(e,l,c){var p=e.split("/");new Array(p.length).fill("").forEach(function(e,t){var s=p.length-t,i=p.slice(0,s),r=function(e,t){var o=new Array(t.length).fill(void 0);return o[0]=e,t.reduce(function(e,t,s,i){var r={container:o[s]||null,name:t};return o[s+1]=r.container&&r.container[t]?r.container[t].children:null,r},{container:e,name:t[0]})}(c,i);if(!r.container||!r.container[r.name])return!1;var o=r.container[r.name],n=o.children&&!!Object.keys(o.children).length;if(o.value&&0===t){var a=l.properties&&l.properties.userProperties&&l.properties.userProperties[u]?l.properties.userProperties[u]:"";fe.delete(o.value,a),Object.keys(o.value).length||fe.set(o,"value",void 0)}n||(fe.set(o,"children",void 0),o.value||fe.delete(r.container,r.name))})}function r(e){return"string"!=typeof e.payload||e.payload.length?s:i}Array.isArray(e)?e.forEach(function(e){r(e)(e.topic,e,t)}):r(e)(e.topic,e,t)}function Ee(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function Ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ee(s,!0).forEach(function(e){Q(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ee(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function Ne(s){return Object.keys(s).map(function(e){var t=s[e];return{status:t.status,config:t.config,publishers:t.publishers,subscribers:t.subscribers,entities:t.entities.filter(function(e){return"unresolved"!==e.type}),subscribersStatuses:t.subscribersStatuses,subscribersConnectivityStatuses:t.subscribersConnectivityStatuses}})}var He,ze,Le,Re,Fe,De,Be,Ve,We,Xe=$(function(e){M.LocalStorage.set(Qe,Ne(e))},500,{trailing:!0}),Qe="clients",Je={name:"MqttClient",props:{initSettings:{type:Object},whiteLabel:{type:String,default:""},useLocalStorage:{type:Boolean,default:!0},needInitNewClient:{type:Boolean,default:!1},secure:{type:Boolean,default:!0},color:{type:String,default:"grey-9"},accentColor:{type:String,default:"light-blue-7"},initEntities:{type:Array,default:function(){return[{type:"subscriber",settings:w(je)},{type:"publisher",settings:w(Oe)}]},validator:function(e){return e.reduce(function(e,t,s){return Ue.methods.validateEntity(t)?e&&!0:e&&!1},!0)}},configuredClients:{type:Array,default:function(){return[]},validator:function(e){var t=!0;return e.forEach(function(e){if(!(e.config&&e.entities&&e.publishers&&e.subscribers))return t=!1;t=t&&Ue.methods.validateSettings(e.config),e.entities.forEach(function(e){t=t&&Ue.methods.validateEntityRecord(e)}),e.publishers.forEach(function(e){t=t&&Ue.methods.validatePublisher(e)}),e.subscribers.forEach(function(e){t=t&&Ue.methods.validateSubscriber(e)})}),t}}},data:function(){return{version:"2.0.2",currentSettings:w(C({},Ie,this.initSettings)),prevSettings:null,clients:{},statuses:{},activeClient:null,entities:[],publishers:[],subscribers:[],subscribersStatuses:[!1],subscribersConnectivityStatuses:[!1],subscribersMessages:[[]],subscribersMessagesBuffer:[[]],connectUserProperty:{value:"",name:""},willConnectUserProperty:{value:"",name:""},settingsModalModel:!1,activeClientSettings:null,renderInterval:0,messagesLimitCount:3e3,notResolvedMessages:[],isNeedScroll:!1,isInited:!1,republishMessage:null}},computed:{isCurrentSettingsValid:function(){var e=this.currentSettings;return this.validateSettings(this.currentSettings)&&!!this.secure&&!(0===e.host.indexOf("ws:"))},logsModel:function(){return!!this.activeClient&&!!this.entities.filter(function(e){return"logs"===e.type}).length},unresolvedModel:function(){return!!this.activeClient&&!!this.entities.filter(function(e){return"unresolved"===e.type}).length}},methods:{isNil:k,openURL:M.openURL,showSettingsModalHandler:function(){this.prevSettings=w(this.currentSettings)},revertSettings:function(){this.clearCurrentSettings(),this.prevSettings=null},clearCurrentSettings:function(){this.currentSettings=w(C({},Ie,this.initSettings)),this.currentSettings.clientId="mqtt-board-".concat(Math.random().toString(16).substr(2,8)),this.activeClientSettings=null},saveSettingsHandler:function(){this.prevSettings=null,this.createClient(this.activeClientSettings),this.settingsModalModel=!1},addUserProperty:function(){this.currentSettings.properties.userProperties||(this.currentSettings.properties.userProperties={}),this.currentSettings.properties.userProperties[this.connectUserProperty.name]=this.connectUserProperty.value,this.connectUserProperty={value:"",name:""}},addWillUserProperty:function(){this.currentSettings.will.properties.userProperties||(this.currentSettings.will.properties.userProperties={}),this.currentSettings.will.properties.userProperties[this.willConnectUserProperty.name]=this.willConnectUserProperty.value,this.willConnectUserProperty={value:"",name:""}},removeConnectUserProperty:function(e){this.$delete(this.currentSettings.properties.userProperties,e),Object.keys(this.currentSettings.properties.userProperties).length||(this.currentSettings.properties.userProperties=null)},removeWillConnectUserProperty:function(e){this.$delete(this.currentSettings.will.properties.userProperties,e),Object.keys(this.currentSettings.will.properties.userProperties).length||(this.currentSettings.will.properties.userProperties=null)},clearObject:function(i){var r=this;return Object.keys(i).reduce(function(e,t){var s=i[t];return s instanceof Object&&(s=r.clearObject(s),Object.keys(s).length||(s=void 0)),null!=s&&(e[t]=s),e},{})},resolveSubscription:function(e,t){var s=P(t,"options.properties.subscriptionIdentifier",void 0),i=P(e,"properties.subscriptionIdentifier",void 0);return!!(i&&s&&("number"==typeof i&&i===s||Array.isArray(i)&&i.includes(s)))||!!this.resolveTopics(e.topic,t.topic)},resolveSubscriptions:function(i,e,r){var o=this;return e.reduce(function(e,t,s){return r[s]&&o.resolveSubscription(i,t)&&e.push(s),e},[])},getSharedTopicFilter:function(e){return e.replace(/^\$share\/[^/]+\//,"")},resolveTopics:function(e,t){0===t.indexOf("$share")&&(t=this.getSharedTopicFilter(t));var s=t.split("/"),i=e.split("/");return(i.length===s.length||"#"===s[s.length-1])&&s.reduce(function(e,t,s){return"#"===t||"+"===t?e&&!0:e&&t===i[s]},!0)},errorHandler:function(e,t,s){this.clients[e].logs.push({type:"error",data:{error:t},timestamp:Date.now()}),s&&this.showError(t)},showError:function(e){this.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">'.concat(e.message,"</div>"),html:!0,color:"negative",icon:"mdi-alert-outline",timeout:2e3})},saveClients:function(){if(!this.isInited)return!1;this.$emit("change",Ne(this.clients)),this.useLocalStorage&&Xe(this.clients)},createConnectPacket:function(e){return 5!==(e=this.clearObject(e)).protocolVersion&&(delete e.properties,e.will&&delete e.will.properties),!e.will||e.will.topic||e.will.payload||delete e.will,e},setClientStatus:function(e,t){if(!this.clients[e])return!1;this.$set(this.statuses,e,t),this.$set(this.clients[e],"status",t)},messageProcessing:function(s,e){var i=this;s.payload=s.payload.toString();try{s.payload=JSON.parse(s.payload)}catch(e){}var r=this.clients[e];if(r.subscribersStatuses.length&&r.subscribersStatuses.filter(function(e){return!!e}).length){var t=this.resolveSubscriptions(s,r.subscribers,r.subscribersStatuses);!!t.length?t.forEach(function(e){!0===r.subscribersStatuses[e]?r.subscribersMessagesBuffer[e].push(s):"paused"===r.subscribersStatuses[e]&&(void 0===r.subscribers[e].missedMessages&&(r.subscribers[e].missedMessages=0),r.subscribers[e].missedMessages++)}):(r.notResolvedFlagInit||this.$set(r,"notResolvedFlagInit",!0),r.notResolvedMessages.push(s))}else r.subscribers.filter(function(e,t){i.resolveSubscription(s,e)&&!r.subscribersConnectivityStatuses[t]&&(r.notResolvedFlagInit||i.$set(r,"notResolvedFlagInit",!0),r.notResolvedMessages.push(s))})},initClient:function(l,e){function t(){c.setClientStatus(l,!1)}var c=this,p=this.clients[l],s=Y.connect(e.host,e);s.on("connect",function(e){var n=p.subscribersStatuses,o=p.subscribers,a=e.properties&&e.properties.userProperties&&e.properties.userProperties.subscriptions?JSON.parse(e.properties.userProperties.subscriptions):[];o.forEach(function(t,e){var s=n[e],i=a.findIndex(function(e){return e.topic===t.topic}),r=-1!==i;if(r&&!s)c.$set(n,e,!0);else if(!r&&s){if(0===t.mode)p.messages[e].splice(0,p.messages[e].length);else{var o=p.messages[e];Object.keys(o).forEach(function(e){c.$delete(o,e)})}p.subscribersMessagesBuffer[e]=[],c.subscribe(l,e)}r&&a.splice(i,1)}),a.forEach(function(e){c.addSubscriber(l);var t=o.length-1,s=o[t],i={nl:e.no_local,rap:e.rap,rh:e.retain_handling,qos:e.qos,properties:{}};e.subscription_id&&(i.subscriptionIdentifier=e.subscription_id),c.$set(s,"options",i),c.$set(s,"topic",e.topic),c.$set(n,t,!0);var r=[{nl:e.no_local,rap:e.rap,rh:e.retain_handling,qos:e.qos,topic:e.topic}];c.$nextTick(function(){p.logs.push({type:"subscribe",data:{grants:r,restored:!0},timestamp:Date.now()})})})}),s.on("connect",function(){c.setClientStatus(l,!0)}),s.on("connect",function(e){p.logs.push({type:"connect",data:Ae({},e),timestamp:Date.now()})}),s.once("connect",function(e){c.$set(p,"cid",c.getCid(e)),c.$set(p,"inited",!0),c.activateRender();var i=[];p.processTimer=setInterval(function(){i.forEach(function(e){c.messageProcessing(e,l)}),i=[]},500),s.on("message",function(e,t,s){i.push(s)})}),s.on("error",function(e){c.errorHandler(l,e,!1)}),s.on("disconnect",function(e){143===e.reasonCode&&p.subscribersStatuses.forEach(function(e,t){e&&(c.$delete(p.client._client._resubscribeTopics,p.subscribers[t].topic),c.$set(p.subscribersStatuses,t,!1),c.$set(p.subscribersConnectivityStatuses,t,!1))}),p.logs.push({type:"disconnect",data:Ae({},e),timestamp:Date.now()}),t()}),s.on("close",function(){p.logs.push({type:"disconnect",timestamp:Date.now()}),t()}),s.on("offline",function(){c.$set(p,"inited",!1),p.logs.push({type:"offline",timestamp:Date.now()}),t()}),s.on("end",function(){p.logs.push({type:"end",timestamp:Date.now()}),t()}),s.on("reconnect",function(){c.$set(p,"inited",!0),p.logs.push({type:"reconnect",timestamp:Date.now()})}),this.$set(this.clients[l],"client",s)},createClient:(We=W(b.mark(function e(t){var s,i,r,o;return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.createConnectPacket(this.currentSettings),i="string"==typeof t||"number"==typeof t?t:Object.keys(this.clients).reduce(function(e,t){return e>parseInt(t)?e:parseInt(t)},-1)+1,this.clients[i]){e.next=11;break}(r={}).id=i,r.status=!1,this.createInitEntities(r),r.logs=[{type:"created",data:Ae({},s),timestamp:Date.now()}],r.notResolvedMessages=[],this.clients[i]=r,e.next=18;break;case 11:if((o=this.clients[i]).client)return o.processTimer&&clearInterval(o.processTimer),e.next=16,o.client.end();e.next=17;break;case 16:this.setClientStatus(i,!1);case 17:o.logs.push({type:"updated",data:Ae({},s),timestamp:Date.now()});case 18:null!==this.statuses[i]&&this.initClient(i,s),this.$set(this.clients[i],"config",s),this.saveClients(),this.clearCurrentSettings();case 22:case"end":return e.stop()}},e,this)})),function(e){return We.apply(this,arguments)}),initExternalClients:function(e){var r=this;e&&e.forEach(function(e){var t=Object.keys(r.clients).length,s={};s.config=e.config,s.id=t,s.client=null,s.status=e.status,s.publishers=e.publishers,s.subscribers=e.subscribers,s.entities=e.entities,s.messages=new Array(e.subscribers.length),s.subscribersMessagesBuffer=new Array(e.subscribers.length);for(var i=0;i<e.subscribers.length;i++)s.messages[i]=e.subscribers[i].mode?{}:[],s.subscribersMessagesBuffer[i]=[];e.subscribersStatuses?s.subscribersStatuses=e.subscribersStatuses:(s.subscribersStatuses=new Array(e.subscribers.length),s.subscribersStatuses.fill(!1)),e.subscribersConnectivityStatuses?s.subscribersConnectivityStatuses=e.subscribersConnectivityStatuses:(s.subscribersConnectivityStatuses=new Array(e.subscribers.length),s.subscribersConnectivityStatuses.fill(!1)),s.logs=[{type:"created",data:Ae({},e.config),timestamp:Date.now()}],s.notResolvedMessages=[],r.$set(r.statuses,t,e.status),r.$set(r.clients,t,s),null!==e.status&&r.initClient(t,r.createConnectPacket(e.config))})},createInitEntities:function(s){var i=this,e=this.initEntities;s.subscribers=[],s.publishers=[],s.entities=[],s.messages=[],s.subscribersMessagesBuffer=[],s.subscribersStatuses=[],s.subscribersConnectivityStatuses=[],e.forEach(function(e,t){switch(e.type){case"subscriber":s.subscribers.push(w(C({},je,e.settings))),s.messages.push(e.settings.mode?{}:[]),s.subscribersMessagesBuffer.push([]),s.subscribersStatuses.push(!1),s.subscribersConnectivityStatuses.push(!1),s.entities.push({type:"subscriber",index:s.subscribers.length-1,id:Math.random().toString(16).substr(2,8)});break;case"publisher":s.publishers.push(w(C({},Oe,e.settings))),s.entities.push({type:"publisher",index:s.publishers.length-1,id:Math.random().toString(16).substr(2,8)});break;default:i.showError(new Error("Unknown type of entity: ".concat(e.type)))}})},addClientHandler:function(){this.settingsModalModel=!0},editClientHandler:function(e){this.currentSettings=w(C({},Ie,this.clients[e].config)),this.activeClientSettings=e,this.settingsModalModel=!0},connectClientHandler:function(e){var t=this.clients[e];t.client&&(t.processTimer&&clearInterval(t.processTimer),t.client.end(),this.setClientStatus(e,!1)),this.initClient(e,t.config),this.saveClients()},disconnectClientHandler:(Ve=W(b.mark(function e(t){var s;return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=this.clients[t]).processTimer&&clearInterval(s.processTimer),this.setClientStatus(t,null),e.next=5,s.client.end();case 5:s.client=null,this.saveClients();case 7:case"end":return e.stop()}},e,this)})),function(e){return Ve.apply(this,arguments)}),deleteClientHandler:function(e){var t=this,s=this.clients[e];this.$q.dialog({title:"Confirm",message:"Do you really want to delete client for ".concat(s.config.clientId,"?"),cancel:!0,ok:!0}).onOk(function(){s.processTimer&&clearInterval(s.processTimer),s.client?s.client.end().then(function(){t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients()}):(t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients())}).onCancel(function(){})},activateRender:function(){var o=this;this.renderInterval||(this.renderInterval=setInterval(function(){Object.values(o.clients).forEach(function(r){r.subscribersMessagesBuffer.forEach(function(e,t){if(!e.length)return!1;var s=r.subscribers[t],i=r.messages[t];0===s.mode?(i&&(e=e.splice(-o.messagesLimitCount),i.splice.apply(i,[i.length,0].concat(D(e))),i.splice(0,i.length-o.messagesLimitCount)),r.subscribersMessagesBuffer[t]=[]):r.subscribersStatuses[t]&&r.subscribersConnectivityStatuses[t]&&(Te(e,5===r.config.protocolVersion&&s.treeField?s.treeField:"",i),r.subscribersMessagesBuffer[t]=[])})})},500))},setActiveClient:function(e){var t=this.clients[e];this.entities=t.entities,this.subscribers=t.subscribers,this.publishers=t.publishers,this.subscribersMessages=t.messages,this.subscribersMessagesBuffer=t.subscribersMessagesBuffer,this.notResolvedMessages=t.notResolvedMessages,this.subscribersStatuses=t.subscribersStatuses,this.subscribersConnectivityStatuses=t.subscribersConnectivityStatuses,this.activeClient=t},clearActiveClient:function(){this.activeClient=null,this.entities=[],this.subscribers=[],this.publishers=[],this.subscribersMessagesBuffer=[],this.notResolvedMessages=[],this.subscribersStatuses=[],this.subscribersConnectivityStatuses=[]},findEntity:function(t){return this.entities.findIndex(function(e){return t.type===e.type&&t.index===e.index})},addPublisher:function(){this.publishers.push(w(Oe)),this.entities.push({type:"publisher",index:this.publishers.length-1,id:Math.random().toString(16).substr(2,8)}),this.saveClients(),this.isNeedScroll=!0},addSubscriber:function(e){e="number"==typeof e||"string"==typeof e?e:this.activeClient.id;var t=this.clients[e];t.subscribers.push(w(je)),t.messages.push([]),t.subscribersMessagesBuffer.push([]),t.subscribersStatuses.push(!1),t.subscribersConnectivityStatuses.push(!1),t.entities.push({type:"subscriber",index:t.subscribers.length-1,id:Math.random().toString(16).substr(2,8)}),this.saveClients(),this.activeClient&&(this.isNeedScroll=!0)},removePublisher:function(t){this.publishers.splice(t,1),this.entities.splice(this.findEntity({type:"publisher",index:t}),1),this.entities.forEach(function(e){"publisher"===e.type&&e.index>t&&e.index--}),this.saveClients()},removeSubscriber:(Be=W(b.mark(function e(t){return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.subscribersStatuses[t])return e.next=4,this.unsubscribeMessageHandler(this.activeClient.id,t);e.next=4;break;case 4:this.subscribers.splice(t,1),this.clients[this.activeClient.id].subscribersStatuses.splice(t,1),this.subscribersConnectivityStatuses.splice(t,1),this.subscribersMessages.splice(t,1),this.entities.splice(this.findEntity({type:"subscriber",index:t}),1),this.entities.forEach(function(e){"subscriber"===e.type&&e.index>t&&e.index--}),this.saveClients();case 11:case"end":return e.stop()}},e,this)})),function(e){return Be.apply(this,arguments)}),inputSubscriber:function(e,t){this.$set(this.subscribers,e,t),this.saveClients()},inputPublisher:function(e,t){this.$set(this.publishers,e,t),this.saveClients()},publishMessageHandler:(De=W(b.mark(function e(t,s){return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.publishFreeMessage(this.publishers[s]);case 2:case"end":return e.stop()}},e,this)})),function(e,t){return De.apply(this,arguments)}),publishFreeMessage:(Fe=W(b.mark(function e(t){return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.clearObject(t),e.prev=1,e.next=4,this.activeClient.client.publish(t.topic,t.payload,t.options);case 4:this.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">Published successfuly in topic '.concat(t.topic,"</div>"),html:!0,color:"positive",timeout:700}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.activeClient.status?this.errorHandler(this.activeClient.id,e.t0,!0):this.errorHandler(this.activeClient.id,new Error("Client disconnected"),!0);case 10:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return Fe.apply(this,arguments)}),subscribeMessageHandler:(Re=W(b.mark(function e(t,s){var i,r=this;return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.clearObject(this.subscribers[s]),this.subscribers.reduce(function(e,t,s){return r.subscribersStatuses[s]&&e.push(t.topic),e},[]).filter(function(e){return e===i.topic||i.topic===r.getSharedTopicFilter(e)||e===r.getSharedTopicFilter(i.topic)}).length)return this.showError(new Error("You have another subscription with same topic")),e.abrupt("return",!1);e.next=4;break;case 4:return this.subscribersMessages&&this.subscribersMessages.length&&this.$set(this.subscribersMessages,s,1===i.mode?{}:[]),e.next=7,this.subscribe(t,s);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return Re.apply(this,arguments)}),subscribe:(Le=W(b.mark(function e(t,s){var i,r,o;return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.clients[t],r=this.clearObject(i.subscribers[s]),e.prev=1,this.$set(this.clients[t].subscribersStatuses,s,!0),this.$set(this.clients[t].subscribersConnectivityStatuses,s,!1),e.next=6,i.client.subscribe(r.topic,r.options);case 6:if(o=e.sent,this.$set(this.clients[t].subscribersConnectivityStatuses,s,!0),!o.length){e.next=12;break}if(i.logs.push({type:"subscribe",data:{settings:r,grants:o},timestamp:Date.now()}),0<(128&o[0].qos))throw new Error("Subscription error ".concat(o[0].qos));e.next=12;break;case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),this.$set(this.clients[t].subscribersStatuses,s,!1),this.$set(this.clients[t].subscribersConnectivityStatuses,s,!1),i.status?this.errorHandler(t,e.t0,!0):this.errorHandler(t,new Error("Client disconnected"),!0);case 19:this.saveClients();case 20:case"end":return e.stop()}},e,this,[[1,14]])})),function(e,t){return Le.apply(this,arguments)}),playSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",void 0),this.$set(this.subscribersStatuses,e,!0)},pauseSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",0),this.$set(this.subscribersStatuses,e,"paused")},clearMessagesHandler:function(e){var t=this.subscribersMessages[e];t.splice(0,t.length)},unsubscribeMessageHandler:(ze=W(b.mark(function e(t,s){return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.unsubscribe(t,s);case 2:case"end":return e.stop()}},e,this)})),function(e,t){return ze.apply(this,arguments)}),unsubscribe:(He=W(b.mark(function e(t,s){var i,r;return b.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.clients[t],r=this.clearObject(i.subscribers[s]),e.prev=1,i.subscribersConnectivityStatuses[s]||this.$set(i.subscribersConnectivityStatuses,s,!0),this.$set(i.subscribersStatuses,s,!1),this.$set(i.messages,s,1===r.mode?{}:[]),e.next=7,i.client.unsubscribe(r.topic,{properties:r.unsubscribeProperties});case 7:i.logs.push({type:"unsubscribe",data:this.clearObject(r),timestamp:Date.now()}),this.$set(i.subscribersConnectivityStatuses,s,!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.status?this.errorHandler(t,e.t0,!0):this.errorHandler(t,new Error("Client disconnected"),!0);case 14:case"end":return e.stop()}},e,this,[[1,11]])})),function(e,t){return He.apply(this,arguments)}),sendFromSubscriberHandler:function(e){var t=this;this.republishMessage=w(e),this.$nextTick(function(){t.$refs.publisherModal.show()})},changeLogsStatus:function(e){e?this.showLogs():this.hideLogs(),this.saveClients()},hideLogs:function(){var e=this.entities.findIndex(function(e){return"logs"===e.type});this.entities.splice(e,1)},showLogs:function(){this.entities.unshift({type:"logs"});var t=this.$refs.wrapper;t&&te.start({from:t.scrollLeft,to:0,duration:200,apply:function(e){t.scrollLeft=e}})},clearLogs:function(){var e=this.activeClient.logs;e.splice(0,e.length)},changeUnresolvedStatus:function(e){e?this.showUnresolved():this.hideUnresolved()},hideUnresolved:function(){var e=this.entities.findIndex(function(e){return"unresolved"===e.type});this.entities.splice(e,1)},showUnresolved:function(){this.entities.push({type:"unresolved"});var t=this.$refs.wrapper;t&&te.start({from:t.scrollLeft,to:t.offsetWidth,duration:200,apply:function(e){t.scrollLeft=e}})},clearUnresolvedMessages:function(){var e=this.activeClient.notResolvedMessages;e.splice(0,e.length)},swipeHandler:function(e){var t=this.$refs.wrapper,s=t&&t.offsetWidth,i=e.direction;t&&"left"===i?te.start({from:t.scrollLeft,to:t.scrollLeft+s,duration:200,apply:function(e){t.scrollLeft=e}}):t&&"right"===i&&te.start({from:t.scrollLeft,to:t.scrollLeft-s,duration:200,apply:function(e){t.scrollLeft=e}})},flespiLoginHandler:function(){var s=this;window.addEventListener("message",function e(t){"string"==typeof t.data&&~t.data.indexOf("FlespiToken")&&(s.currentSettings.username=t.data,window.removeEventListener("message",e))}),this.openWindow("https://flespi.io/login/#/providers")},openWindow:function(e,t){t=t||"auth";var s=void 0!==window.screenLeft?window.screenLeft:screen.left,i=void 0!==window.screenTop?window.screenTop:screen.top,r=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-250+s,o=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-300+i,n=window.open(e,t,"toolbar=no,location=no,status=yes,resizable=yes,scrollbars=yes, width=500, height=600, top="+o+", left="+r);window.focus&&n.focus()},getCid:function(e){return P(JSON.parse(P(e,"properties.userProperties.token","{}")),"cid",null)}},watch:{subscribersStatuses:function(){this.saveClients()}},created:function(){var s=this;if(this.needInitNewClient&&!this.configuredClients.length&&(this.currentSettings=w(C({},Ie,this.initSettings)),this.createClient(),this.setActiveClient(0)),this.configuredClients.length)this.initExternalClients(this.configuredClients);else if(this.useLocalStorage){var e=M.LocalStorage.getItem(Qe);this.initExternalClients(e)}this.isInited=!0,window&&window.addEventListener("beforeunload",function(){for(var e in s.clients){var t=s.clients[e];t.status&&(t.processTimer&&clearInterval(t.processTimer),t.client.end())}})},destroyed:function(){for(var e in this.clients){var t=this.clients[e];t.status&&(t.processTimer&&clearInterval(t.processTimer),t.client.end())}},components:{FlespiTopic:ie,Subscriber:he,Publisher:ye,Unresolved:xe,Logs:_e,PublisherModal:we},updated:function(){if(this.isNeedScroll){var t=this.$refs.wrapper;te.start({from:t.scrollLeft,to:t.scrollWidth,duration:300,apply:function(e){t.scrollLeft=e}}),this.isNeedScroll=!1}},mixins:[Ue]},Ye=U.normalizeComponent({render:function(){var e,t,s,i,r=this,o=r.$createElement,n=r._self._c||o;return n("div",{staticStyle:{position:"absolute",bottom:"0",right:"0",top:"0",left:"0"}},[n("flespi-topic",{ref:"felspiModal",on:{topic:function(e){r.addSubscriber(),r.subscribers[r.subscribers.length-1].topic=e}}}),r.republishMessage?n("publisher-modal",{ref:"publisherModal",attrs:{message:r.republishMessage,version:r.activeClient.config.protocolVersion},on:{publish:r.publishFreeMessage,hide:function(){r.republishMessage=null}}}):r._e(),n("q-dialog",{staticClass:"mqtt-board-modal mqtt-board-settings-modal",attrs:{maximized:r.$q.platform.is.mobile},on:{show:r.showSettingsModalHandler,hide:r.clearCurrentSettings},model:{value:r.settingsModalModel,callback:function(e){r.settingsModalModel=e},expression:"settingsModalModel"}},[n("q-card",{style:{minWidth:r.$q.platform.is.mobile?"100%":"50vw"}},[n("q-card-section",{staticClass:"q-pa-none",class:(e={},e["bg-"+r.color]=!0,e["text-white"]=!!r.color,e)},[n("q-toolbar",{class:(t={},t["bg-"+r.color]=!0,t["text-white"]=!!r.color,t)},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"keyboard_arrow_left"},on:{click:r.revertSettings}}),n("q-toolbar-title",[r._v("\n            Connection settings\n          ")])],1)],1),n("q-separator"),n("q-card-section",{staticClass:"scroll",style:{height:r.$q.platform.is.mobile?"calc(100% - 94px)":"50vh"}},[n("div",[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Client name"},model:{value:r.currentSettings.clientName,callback:function(e){r.$set(r.currentSettings,"clientName",e)},expression:"currentSettings.clientName"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Client ID",error:!r.currentSettings.clientId,"hide-bottom-space":""},model:{value:r.currentSettings.clientId,callback:function(e){r.$set(r.currentSettings,"clientId",e)},expression:"currentSettings.clientId"}},[n("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-refresh",flat:"",round:""},on:{click:function(){r.currentSettings.clientId="mqtt-board-"+Math.random().toString(16).substr(2,8)}},slot:"append"})],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",label:"Host",error:!r.currentSettings.host||r.secure&&0===r.currentSettings.host.indexOf("ws:"),"error-message":"Host must be not empty and only over secured sockets","hide-bottom-space":""},model:{value:r.currentSettings.host,callback:function(e){r.$set(r.currentSettings,"host",e)},expression:"currentSettings.host"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",label:"Keep alive",error:!r.isNil(r.currentSettings.keepalive)&&(r.currentSettings.keepalive<=0||65535<r.currentSettings.keepalive)},model:{value:r.currentSettings.keepalive,callback:function(e){r.$set(r.currentSettings,"keepalive",e)},expression:"currentSettings.keepalive"}}),n("q-select",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",options:[{label:"3.1.1",value:4},{label:"5.0",value:5}],label:"Version of MQTT","hide-bottom-space":"","options-selected-class":"bg-grey-2 text-grey-9"},model:{value:r.currentSettings.protocolVersion,callback:function(e){r.$set(r.currentSettings,"protocolVersion",e)},expression:"currentSettings.protocolVersion"}}),n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:5===r.currentSettings.protocolVersion?"Clean start":"Clean session"},model:{value:r.currentSettings.clean,callback:function(e){r.$set(r.currentSettings,"clean",e)},expression:"currentSettings.clean"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Username"},model:{value:r.currentSettings.username,callback:function(e){r.$set(r.currentSettings,"username",e)},expression:"currentSettings.username"}},[-1!==r.currentSettings.host.indexOf("flespi")?n("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-login",flat:"",round:""},on:{click:r.flespiLoginHandler},slot:"append"}):r._e()],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Password"},model:{value:r.currentSettings.password,callback:function(e){r.$set(r.currentSettings,"password",e)},expression:"currentSettings.password"}}),5===r.currentSettings.protocolVersion?n("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Properties"}},[n("div",{staticClass:"q-px-md q-py-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",min:0,clearable:"",label:"Session expiry interval",error:!r.isNil(r.currentSettings.properties.sessionExpiryInterval)&&(r.currentSettings.properties.sessionExpiryInterval<0||4294967295<r.currentSettings.properties.sessionExpiryInterval)},on:{clear:function(){r.currentSettings.properties.sessionExpiryInterval=void 0}},model:{value:r.currentSettings.properties.sessionExpiryInterval,callback:function(e){r.$set(r.currentSettings.properties,"sessionExpiryInterval",e)},expression:"currentSettings.properties.sessionExpiryInterval"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Receive maximum",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.receiveMaximum)&&(r.currentSettings.properties.receiveMaximum<=0||65535<r.currentSettings.properties.receiveMaximum)},on:{clear:function(){r.currentSettings.properties.receiveMaximum=void 0}},model:{value:r.currentSettings.properties.receiveMaximum,callback:function(e){r.$set(r.currentSettings.properties,"receiveMaximum",e)},expression:"currentSettings.properties.receiveMaximum"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Maximum packet size",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.maximumPacketSize)&&(r.currentSettings.properties.maximumPacketSize<=0||4294967295<r.currentSettings.properties.maximumPacketSize)},on:{clear:function(){r.currentSettings.properties.maximumPacketSize=void 0}},model:{value:r.currentSettings.properties.maximumPacketSize,callback:function(e){r.$set(r.currentSettings.properties,"maximumPacketSize",e)},expression:"currentSettings.properties.maximumPacketSize"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias maximum",clearable:"",outlined:"","hide-bottom-space":"",error:!r.isNil(r.currentSettings.properties.topicAliasMaximum)&&(r.currentSettings.properties.topicAliasMaximum<0||65535<r.currentSettings.properties.topicAliasMaximum)},model:{value:r.currentSettings.properties.topicAliasMaximum,callback:function(e){r.$set(r.currentSettings.properties,"topicAliasMaximum",e)},expression:"currentSettings.properties.topicAliasMaximum"}}),n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Request-Response information"},model:{value:r.currentSettings.properties.requestResponseInformation,callback:function(e){r.$set(r.currentSettings.properties,"requestResponseInformation",e)},expression:"currentSettings.properties.requestResponseInformation"}}),n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Request problem information"},model:{value:r.currentSettings.properties.requestProblemInformation,callback:function(e){r.$set(r.currentSettings.properties,"requestProblemInformation",e)},expression:"currentSettings.properties.requestProblemInformation"}}),n("div",{staticClass:"q-mb-sm"},[n("div",{staticClass:"q-mt-md"},[r._v("User Properties")]),n("div",[r.currentSettings.properties.userProperties?n("q-list",{staticClass:"q-mb-xs",attrs:{bordered:""}},r._l(r.currentSettings.properties.userProperties,function(e,t){return n("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[n("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return r.removeConnectUserProperty(t)}}}),n("span",[r._v(r._s(t+": "+e))])],1)}),1):r._e(),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property name",outlined:"","hide-bottom-space":""},model:{value:r.connectUserProperty.name,callback:function(e){r.$set(r.connectUserProperty,"name",e)},expression:"connectUserProperty.name"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property value",outlined:"","hide-bottom-space":""},model:{value:r.connectUserProperty.value,callback:function(e){r.$set(r.connectUserProperty,"value",e)},expression:"connectUserProperty.value"}}),n("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:r.addUserProperty}},[r._v("Add")])],1)]),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Authentication method",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.properties.authenticationMethod,callback:function(e){r.$set(r.currentSettings.properties,"authenticationMethod",e)},expression:"currentSettings.properties.authenticationMethod"}}),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Authentication data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.properties.authenticationData,callback:function(e){r.$set(r.currentSettings.properties,"authenticationData",e)},expression:"currentSettings.properties.authenticationData"}})],1)]):r._e(),n("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Will"}},[n("div",{staticClass:"q-px-md q-py-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",error:!this.currentSettings.will.topic&&!!this.currentSettings.will.payload,label:"Will topic",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.topic,callback:function(e){r.$set(r.currentSettings.will,"topic",e)},expression:"currentSettings.will.topic"}}),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",error:!!this.currentSettings.will.topic&&!this.currentSettings.will.payload,type:"textarea",label:"Will payload",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.will.payload,callback:function(e){r.$set(r.currentSettings.will,"payload",e)},expression:"currentSettings.will.payload"}}),n("div",{staticClass:"q-my-sm"},[r._v("\n                QoS\n                "),n("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:r.currentSettings.will.qos,callback:function(e){r.$set(r.currentSettings.will,"qos",e)},expression:"currentSettings.will.qos"}})],1),n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Will retain"},model:{value:r.currentSettings.will.retain,callback:function(e){r.$set(r.currentSettings.will,"retain",e)},expression:"currentSettings.will.retain"}}),5===r.currentSettings.protocolVersion?n("q-expansion-item",{staticClass:"bg-grey-4",attrs:{label:"Will properties"}},[n("div",{staticClass:"q-px-md q-py-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"",clearable:"","hide-bottom-space":"",type:"number",label:"Will delay interval"},on:{clear:function(){r.currentSettings.will.properties.willDelayInterval=void 0}},model:{value:r.currentSettings.will.properties.willDelayInterval,callback:function(e){r.$set(r.currentSettings.will.properties,"willDelayInterval",e)},expression:"currentSettings.will.properties.willDelayInterval"}}),n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:r.currentSettings.will.properties.payloadFormatIndicator,callback:function(e){r.$set(r.currentSettings.will.properties,"payloadFormatIndicator",e)},expression:"currentSettings.will.properties.payloadFormatIndicator"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",clearable:"",outlined:"","hide-bottom-space":""},on:{clear:function(){r.currentSettings.will.properties.messageExpiryInterval=void 0}},model:{value:r.currentSettings.will.properties.messageExpiryInterval,callback:function(e){r.$set(r.currentSettings.will.properties,"messageExpiryInterval",e)},expression:"currentSettings.will.properties.messageExpiryInterval"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Content type",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.properties.contentType,callback:function(e){r.$set(r.currentSettings.will.properties,"contentType",e)},expression:"currentSettings.will.properties.contentType"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:r.currentSettings.will.properties.responseTopic,callback:function(e){r.$set(r.currentSettings.will.properties,"responseTopic",e)},expression:"currentSettings.will.properties.responseTopic"}}),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Correlation data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:r.currentSettings.will.properties.correlationData,callback:function(e){r.$set(r.currentSettings.will.properties,"correlationData",e)},expression:"currentSettings.will.properties.correlationData"}}),n("div",[n("div",{staticClass:"q-mt-md"},[r._v("Will user properties")]),n("div",[r.currentSettings.will.properties.userProperties?n("q-list",{staticClass:"q-mb-xs",staticStyle:{"border-color":"#b7b7b7"}},r._l(r.currentSettings.will.properties.userProperties,function(e,t){return n("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[n("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(){return r.removeWillConnectUserProperty(t)}}}),n("span",[r._v(r._s(t+": "+e))])],1)}),1):r._e(),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property name",outlined:"","hide-bottom-space":""},model:{value:r.willConnectUserProperty.name,callback:function(e){r.$set(r.willConnectUserProperty,"name",e)},expression:"willConnectUserProperty.name"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property value",outlined:"","hide-bottom-space":""},model:{value:r.willConnectUserProperty.value,callback:function(e){r.$set(r.willConnectUserProperty,"value",e)},expression:"willConnectUserProperty.value"}}),n("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:r.addWillUserProperty}},[r._v("Add")])],1)])],1)]):r._e()],1)])],1)]),n("q-separator"),n("q-card-actions",{class:(s={},s["bg-"+r.color]=!0,s["text-white"]=!!r.color,s),attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:r.revertSettings}},[r._v("Close")]),n("q-btn",{attrs:{flat:"",dense:"",disable:!r.isCurrentSettingsValid},on:{click:r.saveSettingsHandler}},[r._v("Save")])],1)],1)],1),r.activeClient?r._e():n("q-btn",{staticStyle:{position:"absolute",right:"16px",top:"21px","z-index":"2"},attrs:{fab:"",icon:"mdi-plus",color:r.accentColor},nativeOn:{click:function(e){return r.addClientHandler(e)}}}),n("q-toolbar",{class:(i={},i["bg-"+r.color]=!0,i["text-white"]=!!r.color,i),staticStyle:{position:"absolute","z-index":"1"}},[r.activeClient?n("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"mdi-close"},on:{click:r.clearActiveClient}}):r._e(),n("q-toolbar-title",[r.activeClient||""!==r.whiteLabel?r._e():n("img",{staticStyle:{height:"30px"},attrs:{src:"statics/mqttboard.png",alt:"MQTT Board"}}),r.activeClient?n("span",[r._v("\n        "+r._s(""+(r.activeClient.config.clientName||r.activeClient.config.clientId))+"\n        "),r.activeClient.config.clientName?n("q-tooltip",[r._v(r._s(""+r.activeClient.config.clientId))]):r._e()],1):n("span",[r._v("\n        "+r._s(r.whiteLabel||"MQTT Board")+"\n      ")]),r.activeClient&&r.$q.platform.is.desktop?n("sup",{staticClass:"absolute",class:["bg-"+(r.activeClient.status?"green":"red")],staticStyle:{"border-radius":"5px","font-size":".6rem",padding:"2px","min-width":"15px",top:"5px"}},[r._v(r._s(r.activeClient.status?"online":"offline"))]):r._e(),r.activeClient&&r.$q.platform.is.desktop&&r.activeClient.cid?n("sub",{staticStyle:{"border-radius":"5px","font-size":".7rem",padding:"2px"},attrs:{title:"cid"}},[r._v(r._s(r.activeClient.cid))]):r._e(),r.activeClient||""!==r.whiteLabel?r._e():n("sup",{staticStyle:{position:"relative","font-size":".9rem","padding-left":"4px"}},[r._v(r._s(r.version))])]),r.activeClient&&r.activeClient.notResolvedFlagInit?n("q-btn",{staticClass:"q-mr-md",attrs:{dark:"",color:"white",flat:"",round:"",icon:r.unresolvedModel?"mdi-alert-circle":"mdi-alert-circle-outline"},on:{click:function(){return r.changeUnresolvedStatus(!r.unresolvedModel)}}},[n("q-tooltip",[r._v("Unresolved")])],1):r._e(),r.activeClient?n("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",color:r.logsModel?"blue-5":"white",icon:"mdi-script"},on:{click:function(){return r.changeLogsStatus(!r.logsModel)}}},[n("q-tooltip",{staticClass:"gt-sm"},[r._v("Logs")])],1):r._e(),r.activeClient?n("q-btn",{attrs:{round:"",flat:"",dark:"",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),r.editClientHandler(r.activeClient.id)}}}):r._e(),r.activeClient?n("q-btn",{attrs:{round:"",flat:"",icon:"mdi-plus"}},[n("q-menu",{attrs:{anchor:"bottom right",self:"top right"}},[n("q-list",[n("q-item-label",{attrs:{header:""}},[r._v("Add pane")]),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return r.addPublisher(e)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-publish"}})],1),n("q-item-section",[n("q-item-label",[r._v("Publisher")])],1)],1),n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(e){return r.addSubscriber(e)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-arrow-down-bold"}})],1),n("q-item-section",[n("q-item-label",[r._v("Subscriber")])],1)],1),r.activeClient&&-1!==r.activeClient.config.host.indexOf("flespi")?n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(){return r.$refs.felspiModal.open()}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:"mdi-star-outline"}})],1),n("q-item-section",[n("q-item-label",[r._v("Flespi subscriber")])],1)],1):r._e()],1)],1)],1):r._e(),r.activeClient||r.whiteLabel?r._e():n("q-btn",{staticStyle:{"margin-right":"60px"},attrs:{dense:"",flat:"",color:"white",icon:"mdi-github-circle",label:r.$q.platform.is.mobile?"":"Fork me!"},on:{click:function(){return r.openURL("https://github.com/flespi-software/MQTT-Board")}}})],1),r.activeClient?r.entities.length?n("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:r.swipeHandler,expression:"swipeHandler",modifiers:{horizontal:!0}}],ref:"wrapper",staticClass:"no-wrap row client__wrapper"},[r._l(r.entities,function(t,e){return["publisher"===t.type?n("publisher",{key:"publ"+t.id,class:["col-xl-"+(r.entities.length<4?12/r.entities.length:3)],attrs:{value:r.publishers[t.index],version:r.activeClient.config.protocolVersion},on:{input:function(e){r.inputPublisher(t.index,e)},remove:function(){return r.removePublisher(t.index)},publish:function(){return r.publishMessageHandler(r.activeClient.id,t.index)}}}):"subscriber"===t.type?n("subscriber",{key:"subs"+t.id,class:["col-xl-"+(r.entities.length<4?12/r.entities.length:3)],attrs:{value:r.subscribers[t.index],status:r.subscribersStatuses[t.index],subscribed:r.subscribersConnectivityStatuses[t.index],messages:r.subscribersMessages[t.index],version:r.activeClient.config.protocolVersion},on:{input:function(e){r.inputSubscriber(t.index,e)},remove:function(){return r.removeSubscriber(t.index)},subscribe:function(){return r.subscribeMessageHandler(r.activeClient.id,t.index)},unsubscribe:function(){return r.unsubscribeMessageHandler(r.activeClient.id,t.index)},play:function(){return r.playSubscriberHandler(t.index)},pause:function(){return r.pauseSubscriberHandler(t.index)},clear:function(){return r.clearMessagesHandler(t.index)},"action:send":r.sendFromSubscriberHandler}}):"unresolved"===t.type?n("unresolved",{key:"unresolved"+e,class:["col-xl-"+(r.entities.length<4?12/r.entities.length:3)],attrs:{messages:r.notResolvedMessages},on:{clear:r.clearUnresolvedMessages}}):"logs"===t.type?n("logs",{key:"subs"+e,class:["col-xl-"+(r.entities.length<4?12/r.entities.length:3)],attrs:{logs:r.activeClient.logs},on:{clear:r.clearLogs}}):r._e()]})],2):r.entities.length?r.statuses[r.activeClient.id]||r.logsModel||r.entities.length?r._e():n("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[n("div",[r._v("Сlient is disconnected")]),n("div",{staticClass:"q-mt-sm",staticStyle:{"font-size":"1.3rem"}},[r._v("You can "),n("q-btn",{attrs:{dense:"",color:"grey-9",icon:"mdi-script",label:"activate logs"},on:{click:function(){return r.changeLogsStatus(!0)}}}),r._v(" for more information")],1)]):n("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[r._v("No active entities")]):n("div",{staticClass:"absolute scroll",staticStyle:{top:"50px",left:"0",right:"0",bottom:"0"}},[Object.keys(r.clients).length?n("div",{staticClass:"mqtt-clients row q-pt-md"},r._l(r.clients,function(e,t){return n("div",{key:t,staticClass:"client__item q-pt-md q-px-md cursor-pointer col-xl-3 col-md-4 col-sm-6 col-xs-12"},[n("q-card",{class:{"bg-red-2":!r.statuses[t],"bg-green-2":r.statuses[t]},nativeOn:{click:function(){return r.setActiveClient(t)}}},[n("q-card-section",{staticClass:"q-py-sm"},[n("div",{staticClass:"ellipsis q-mb-xs",staticStyle:{"font-size":"18px","line-height":"18px","min-height":"18px"}},[r._v(r._s(e.config.clientName||e.config.clientId))]),n("div",{staticClass:"ellipsis text-grey-9",staticStyle:{"font-size":"14px","line-height":"14px","min-height":"14px"}},[r._v(r._s(e.config.clientName?e.config.clientId:""))])]),n("q-card-section",{staticClass:"ellipsis"},[n("span",{staticClass:"text-grey-9"},[r._v(r._s(e.config.host))])]),n("q-separator"),n("q-card-actions",{attrs:{align:"right"}},[e.client?n("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-stop",loading:!!e.client&&!r.statuses[t]&&e.inited},on:{click:function(e){return e.stopPropagation(),r.disconnectClientHandler(t)}}},[n("q-tooltip",[r._v("Deactivate client")])],1):n("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-play"},on:{click:function(e){return e.stopPropagation(),r.connectClientHandler(t)}}},[n("q-tooltip",[r._v("Activate client")])],1),n("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),r.editClientHandler(t)}}}),n("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-delete"},on:{click:function(e){return e.stopPropagation(),r.deleteClientHandler(t)}}})],1)],1)],1)}),0):n("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold",staticStyle:{"font-size":"2.5rem"}},[n("div",[r._v("No clients")]),r.activeClient?r._e():n("q-btn",{nativeOn:{click:function(e){return r.addClientHandler(e)}}},[r._v("Create client")])],1)])],1)},staticRenderFns:[]},function(e){e&&e("data-v-1b6dd8bb_0",{source:".q-textarea--fix.q-textarea.q-field--labeled textarea.q-field__native{min-height:27px}.client__item:last-child{margin-bottom:16px}.client__wrapper{position:absolute;top:50px;bottom:0;left:0;right:0;overflow:auto}",map:void 0,media:void 0})},Je,void 0,!1,void 0,!1,U.createInjector,void 0,void 0);e.default=Ye,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mqtt-board.js.map
